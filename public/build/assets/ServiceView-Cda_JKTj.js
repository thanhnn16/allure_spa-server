import{r as v,e as Q,aU as i,a0 as B,bH as h,aa as l,bl as a,a3 as r,a1 as C,a2 as c,bJ as S,bz as M,F as z,b0 as A,bf as f,bA as Z,j as x}from"./@vue-BRgAy5zV.js";import{aA as q,b as R,F as W,H as P,aB as Y,aC as ee,aD as re}from"./@mdi-ArhfA4cU.js";import{_ as te}from"./SectionMain-Vot1TOkK.js";import{_ as se}from"./CardBox-jfYP3QDG.js";import{L as ae}from"./LayoutAuthenticated-DlEjrQPg.js";import{_ as oe}from"./SectionTitleLineWithButton-DaZ51k7S.js";import{_ as m}from"./BaseButton-eMTGofBM.js";import{_}from"./BaseIcon-B4kwkOCn.js";import{T as le,Z as ie,F as V}from"./@inertiajs-D0DMCEQB.js";import{_ as ne}from"./TablePagination-BLryTwgf.js";import ce from"./ServiceFormModal-XKh4Wgh3.js";import{u as de}from"./vue-toastification-ejyjJRED.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-cffazU8B.js";import"./jspdf-Ciebq7We.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./axios-CCb-kr4I.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./deepmerge-CtOfIP5S.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";import"./CardBoxModal-CC98zKJS.js";import"./BaseButtons-B17KSMwc.js";const ue={class:"flex items-center justify-between mb-3"},pe={class:"flex items-center space-x-4"},fe={key:0,class:"mb-4"},ge={class:"grid grid-cols-2 gap-4 mb-4"},ye=["value"],ke={class:"my-4"},be={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},ve={key:2,class:"overflow-x-auto"},he={class:"w-full text-sm text-gray-500 dark:text-gray-300"},xe={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-dark-surface/50 dark:text-gray-300"},_e={class:"flex items-center justify-between h-full"},we={class:"flex items-center justify-between h-full"},Ce={class:"flex items-center justify-between h-full"},Se={class:"flex items-center justify-between h-full"},Ve={class:"px-6 py-4"},$e=["src","alt"],Te={class:"px-6 py-4 font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap"},Fe={class:"px-6 py-4"},De={class:"px-6 py-4"},je={class:"px-6 py-4"},Ne={class:"px-6 py-4"},Be={key:0,class:"mt-6"},Me={__name:"ServiceView",props:{services:Object,categories:Array,filters:Object},setup(n){var T,F,D,j,N;const u=n,g=v(!1),s=le({search:((T=u.filters)==null?void 0:T.search)||"",category:((F=u.filters)==null?void 0:F.category)||"",per_page:((D=u.filters)==null?void 0:D.per_page)||10,sort:((j=u.filters)==null?void 0:j.sort)||"",direction:((N=u.filters)==null?void 0:N.direction)||"asc"}),$=v(null);Q(()=>s.search,o=>{clearTimeout($.value),$.value=setTimeout(()=>{p()},300)});const U=()=>{g.value=!g.value},p=()=>{V.get(route("services.index"),s,{preserveState:!0})},I=()=>{s.reset(),p()},X=()=>{p()},y=o=>{s.sort===o?s.direction=s.direction==="asc"?"desc":"asc":(s.sort=o,s.direction="asc"),p()},k=o=>s.sort!==o?Y:s.direction==="asc"?ee:re,E=o=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o),L=o=>{if(o==null)return"Chưa cập nhật";const e=Math.floor(o/60),t=o%60;let d="";return e>0&&(d+=`${e}h `),(t>0||e===0)&&(d+=`${t}m`),d.trim()},H=o=>{V.visit(route("services.show",o))};de();const b=v(!1),w=v(null),O=()=>{w.value=null,b.value=!0},G=()=>{b.value=!1,w.value=null},J=()=>{V.reload()},K=o=>o.media&&o.media.length>0?o.media[0].full_url:"https://via.placeholder.com/150";return(o,e)=>(i(),B(ae,null,{default:h(()=>[l(a(ie),{title:"Quản lý liệu trình"}),l(te,null,{default:h(()=>[l(oe,{icon:a(q),title:"Danh sách liệu trình",main:""},{default:h(()=>[l(m,{icon:a(R),label:"Tạo liệu trình",color:"info","rounded-full":"",small:"",onClick:O},null,8,["icon"]),l(m,{icon:a(W),label:"Nhập từ Excel",color:"success","rounded-full":"",small:""},null,8,["icon"])]),_:1},8,["icon"]),l(se,{class:"mb-6 px-4 py-4 dark:bg-dark-surface","has-table":""},{default:h(()=>[r("div",ue,[r("div",pe,[l(m,{icon:a(P),label:"Bộ lọc",onClick:U},null,8,["icon"]),g.value?(i(),B(m,{key:0,label:"Đặt lại bộ lọc",onClick:I})):C("",!0)])]),g.value?(i(),c("div",fe,[r("div",ge,[r("div",null,[e[9]||(e[9]=r("label",{class:"block mb-2 text-gray-700 dark:text-gray-300"},"Danh mục",-1)),S(r("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>a(s).category=t),class:"w-full px-4 py-2 border rounded-md bg-white dark:bg-dark-surface dark:border-dark-border dark:text-gray-300 focus:border-primary-500 dark:focus:border-primary-500"},[e[8]||(e[8]=r("option",{value:"",class:"dark:bg-dark-surface"},"Tất cả danh mục",-1)),(i(!0),c(z,null,A(n.categories,t=>(i(),c("option",{key:t.id,value:t.id,class:"dark:bg-dark-surface"},f(t.service_category_name),9,ye))),128))],512),[[M,a(s).category]])])]),l(m,{icon:a(P),label:"Áp dụng bộ lọc",onClick:p},null,8,["icon"])])):C("",!0),r("div",ke,[S(r("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a(s).search=t),type:"text",placeholder:"Tìm kiếm liệu trình...",class:"w-full px-4 py-2 mb-4 border rounded-md bg-white dark:bg-dark-surface dark:border-dark-border dark:text-gray-300 dark:placeholder-gray-500 focus:border-primary-500 dark:focus:border-primary-500"},null,512),[[Z,a(s).search]]),S(r("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>a(s).per_page=t),onChange:X,class:"px-8 py-2 border rounded-md bg-white dark:bg-dark-surface dark:border-dark-border dark:text-gray-300 focus:border-primary-500 dark:focus:border-primary-500"},e[10]||(e[10]=[r("option",{value:10,class:"dark:bg-dark-surface"},"Xem 10 mỗi trang",-1),r("option",{value:25,class:"dark:bg-dark-surface"},"Xem 25 mỗi trang",-1),r("option",{value:50,class:"dark:bg-dark-surface"},"Xem 50 mỗi trang",-1)]),544),[[M,a(s).per_page]])]),!n.services.data||n.services.data.length===0?(i(),c("div",be," Không có dữ liệu liệu trình ")):(i(),c("div",ve,[r("table",he,[r("thead",xe,[r("tr",null,[e[15]||(e[15]=r("th",{scope:"col",class:"px-6 py-3 w-24"},"Ảnh",-1)),r("th",{onClick:e[3]||(e[3]=t=>y("service_name")),scope:"col",class:"px-6 py-3 cursor-pointer"},[r("div",_e,[e[11]||(e[11]=r("span",{class:"mr-2"},"Tên liệu trình",-1)),l(_,{path:k("service_name"),size:"18",class:x(["flex-shrink-0",{"text-primary-600 dark:text-primary-400":a(s).sort==="service_name","text-gray-400 dark:text-gray-600":a(s).sort!=="service_name"}])},null,8,["path","class"])])]),r("th",{onClick:e[4]||(e[4]=t=>y("category_id")),scope:"col",class:"px-6 py-3 cursor-pointer"},[r("div",we,[e[12]||(e[12]=r("span",{class:"mr-2"},"Danh mục",-1)),l(_,{path:k("category_id"),size:"18",class:x(["flex-shrink-0",{"text-gray-900":a(s).sort==="category_id","text-gray-400":a(s).sort!=="category_id"}])},null,8,["path","class"])])]),r("th",{onClick:e[5]||(e[5]=t=>y("duration")),scope:"col",class:"px-6 py-3 cursor-pointer"},[r("div",Ce,[e[13]||(e[13]=r("span",{class:"mr-2"},"Thời gian",-1)),l(_,{path:k("duration"),size:"18",class:x(["flex-shrink-0",{"text-gray-900":a(s).sort==="duration","text-gray-400":a(s).sort!=="duration"}])},null,8,["path","class"])])]),r("th",{onClick:e[6]||(e[6]=t=>y("single_price")),scope:"col",class:"px-6 py-3 cursor-pointer"},[r("div",Se,[e[14]||(e[14]=r("span",{class:"mr-2"},"Giá (1 lần)",-1)),l(_,{path:k("single_price"),size:"18",class:x(["flex-shrink-0",{"text-gray-900":a(s).sort==="single_price","text-gray-400":a(s).sort!=="single_price"}])},null,8,["path","class"])])]),e[16]||(e[16]=r("th",{scope:"col",class:"px-6 py-3 w-32"},"Thao tác",-1))])]),r("tbody",null,[(i(!0),c(z,null,A(n.services.data,t=>{var d;return i(),c("tr",{key:t.id,class:"bg-white border-b hover:bg-gray-50 dark:bg-dark-surface dark:border-dark-border dark:hover:bg-dark-surface/70"},[r("td",Ve,[r("img",{src:K(t),alt:t.service_name,class:"w-16 h-16 object-cover rounded-md"},null,8,$e)]),r("td",Te,f(t.service_name),1),r("td",Fe,f(((d=t.category)==null?void 0:d.service_category_name)||"N/A"),1),r("td",De,f(L(t.duration)),1),r("td",je,f(E(t.single_price)),1),r("td",Ne,[l(m,{label:"Xem chi tiết",color:"info",small:"",onClick:ze=>H(t.id)},null,8,["onClick"])])])}),128))])])]))]),_:1}),n.services.links?(i(),c("div",Be,[l(ne,{links:n.services.links},null,8,["links"])])):C("",!0)]),_:1}),l(ce,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=t=>b.value=t),service:w.value,categories:n.categories,onClose:G,onServiceSaved:J},null,8,["modelValue","service","categories"])]),_:1}))}},Dr=me(Me,[["__scopeId","data-v-038996c6"]]);export{Dr as default};
