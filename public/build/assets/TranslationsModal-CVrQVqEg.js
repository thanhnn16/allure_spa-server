import{r as y,c as N,o as $,aU as l,a0 as j,bH as b,a3 as t,aa as k,a2 as n,b0 as _,j as M,bf as i,F as f,bJ as w,bA as T,bx as B,a1 as C}from"./@vue-BRgAy5zV.js";import{_ as V}from"./BaseButton-eMTGofBM.js";import{C as F}from"./CardBoxModal-COZ15ICG.js";import"./@inertiajs-D0DMCEQB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./colors-S7_1wET5.js";import"./BaseIcon-B4kwkOCn.js";import"./@mdi-CTfBXXzV.js";import"./BaseButtons-B17KSMwc.js";import"./CardBox-jfYP3QDG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./OverlayLayer-BSs7OF78.js";const U={class:"space-y-6 max-h-[70vh] overflow-y-auto px-2 custom-scrollbar"},S={class:"flex items-center space-x-4 sticky top-0 bg-white dark:bg-dark-bg py-4 z-10 border-b dark:border-dark-border"},D={class:"flex space-x-2"},O=["onClick"],A={key:0,class:"space-y-6"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"space-y-2"},H={class:"font-medium text-gray-500 dark:text-gray-400 flex items-center space-x-2"},J={class:"bg-gray-50 dark:bg-dark-bg rounded-lg p-3"},K={class:"whitespace-pre-line"},P={class:"space-y-2"},Q={class:"font-medium text-gray-700 dark:text-gray-300 flex items-center justify-between"},R={class:"flex items-center space-x-2"},X={class:"text-sm text-gray-500"},G={class:"relative"},I=["onUpdate:modelValue","maxlength","placeholder"],W=["onUpdate:modelValue","type","maxlength","placeholder"],Y=["onClick"],Z={class:"flex justify-end space-x-2"},Me={__name:"TranslationsModal",props:{modelValue:Boolean,service:{type:Object,required:!0}},emits:["update:modelValue","translations-updated"],setup(p,{emit:L}){const m=p,h=L,u=y(!1),r=y("en"),s=y({}),c=N({get:()=>m.modelValue,set:o=>h("update:modelValue",o)}),g=[{code:"en",name:"English"},{code:"ja",name:"日本語"}],x=[{key:"service_name",label:"Tên dịch vụ",type:"text",maxLength:255},{key:"description",label:"Mô tả",type:"textarea",maxLength:1e3}];$(async()=>{g.forEach(o=>{s.value[o.code]={},x.forEach(a=>{s.value[o.code][a.key]=""})});try{const a=await(await fetch(`/api/services/${m.service.id}/translations`)).json();a.data&&(s.value={...s.value,...a.data})}catch(o){console.error("Error loading translations:",o)}});const E=async()=>{u.value=!0;try{if(!(await fetch(`/api/services/${m.service.id}/translations`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({translations:s.value})})).ok)throw new Error("Failed to save translations");h("translations-updated"),c.value=!1}catch(o){console.error("Error saving translations:",o)}finally{u.value=!1}};return(o,a)=>(l(),j(F,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),title:"Quản lý bản dịch","has-cancel":!1,"has-button":!1,"max-width":"2xl"},{footer:b(()=>[t("div",Z,[k(V,{label:"Hủy",color:"white",onClick:a[0]||(a[0]=e=>c.value=!1)}),k(V,{label:"Lưu",color:"success",onClick:E,loading:u.value},null,8,["loading"])])]),default:b(()=>[t("div",U,[t("div",S,[a[2]||(a[2]=t("label",{class:"w-32 font-medium text-gray-700 dark:text-gray-300"},"Ngôn ngữ:",-1)),t("div",D,[(l(),n(f,null,_(g,e=>t("button",{key:e.code,onClick:v=>r.value=e.code,class:M(["px-4 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2",[r.value===e.code?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-bg hover:bg-gray-200 dark:hover:bg-dark-surface"]])},[t("span",null,i(e.name),1)],10,O)),64))])]),s.value[r.value]?(l(),n("div",A,[(l(),n(f,null,_(x,e=>{var v;return t("div",{key:e.key,class:"space-y-2"},[t("div",q,[t("div",z,[t("label",H,[t("span",null,i(e.label),1)]),t("div",J,[t("p",K,i(p.service[e.key]||"Chưa có nội dung"),1)])]),t("div",P,[t("label",Q,[t("div",R,[t("span",null,i(e.label),1)]),t("span",X,i(((v=s.value[r.value][e.key])==null?void 0:v.length)||0)+"/"+i(e.maxLength),1)]),t("div",G,[e.type==="textarea"?w((l(),n("textarea",{key:0,"onUpdate:modelValue":d=>s.value[r.value][e.key]=d,class:"w-full form-textarea rounded-lg dark:bg-dark-bg min-h-[100px]",maxlength:e.maxLength,placeholder:`Nhập bản dịch cho ${e.label.toLowerCase()}...`},null,8,I)),[[T,s.value[r.value][e.key]]]):w((l(),n("input",{key:1,"onUpdate:modelValue":d=>s.value[r.value][e.key]=d,class:"w-full form-input rounded-lg dark:bg-dark-bg",type:e.type,maxlength:e.maxLength,placeholder:`Nhập bản dịch cho ${e.label.toLowerCase()}...`},null,8,W)),[[B,s.value[r.value][e.key]]]),!s.value[r.value][e.key]&&p.service[e.key]?(l(),n("button",{key:2,onClick:d=>o.translateField(e.key),class:"absolute right-2 top-2 text-primary-500 hover:text-primary-600 dark:text-primary-400",title:"Dịch tự động"},a[3]||(a[3]=[t("i",{class:"mdi mdi-translate text-xl"},null,-1)]),8,Y)):C("",!0)])])])])}),64))])):C("",!0)])]),_:1},8,["modelValue"]))}};export{Me as default};
