import{r as u,f as H,aU as i,a0 as U,bH as b,a3 as s,aa as o,bl as r,a9 as k,bM as n,bJ as B,bz as L,a2 as d,b0 as M,bf as g,F as N,j as S,a1 as I}from"./@vue-BRgAy5zV.js";import{i as _,j as P,k as A}from"./@mdi-ybpv6R7X.js";import{_ as C}from"./BaseButton-eMTGofBM.js";import{_ as f}from"./BaseIcon-B4kwkOCn.js";import{V as G,G as Y,Y as q}from"./@headlessui-BdO8fvzs.js";import"./@inertiajs-D0DMCEQB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./colors-S7_1wET5.js";const E={class:"fixed inset-0 flex items-center justify-center p-4"},J={class:"flex justify-between items-center mb-6"},K={class:"space-y-2"},O=["value"],R={key:0},X={key:1,class:"text-left"},Q={class:"flex items-center justify-between"},W={class:"flex items-center space-x-2"},Z={class:"text-sm"},ee={key:0,class:"mt-4"},te={class:"text-xs bg-gray-50 dark:bg-slate-700 p-3 rounded max-h-40 overflow-auto"},se={class:"flex justify-end space-x-3"},ze={__name:"UploadModal",props:{configTypes:{type:Object,required:!0}},emits:["close","upload"],setup(w,{emit:j}){const D=j,p=u(null),c=u(!1),m=u(""),v=u(!1),a=H({type:"system_prompt",file:null}),T=()=>{p.value.click()},F=t=>{const e=t.target.files[0];e&&y(e)},x=t=>{t.preventDefault(),t.stopPropagation(),c.value=t.type==="dragenter"||t.type==="dragover"},$=t=>{t.preventDefault(),t.stopPropagation(),c.value=!1,t.dataTransfer.files&&t.dataTransfer.files[0]&&y(t.dataTransfer.files[0])},y=t=>{if(!["text/plain","application/json"].includes(t.type)){alert("Chỉ hỗ trợ file .txt và .json");return}a.file=t;const e=new FileReader;e.onload=l=>{m.value=l.target.result},e.readAsText(t)},z=()=>{a.file=null,m.value="",p.value&&(p.value.value="")},V=async()=>{try{v.value=!0,D("upload",a)}finally{v.value=!1}};return(t,e)=>(i(),U(r(q),{open:!0,onClose:e[3]||(e[3]=l=>t.$emit("close")),class:"relative z-50"},{default:b(()=>[e[9]||(e[9]=s("div",{class:"fixed inset-0 bg-black/30","aria-hidden":"true"},null,-1)),s("div",E,[o(r(Y),{class:"w-full max-w-md rounded bg-white dark:bg-slate-800 p-6"},{default:b(()=>[s("div",J,[o(r(G),{class:"text-lg font-medium"},{default:b(()=>e[4]||(e[4]=[k(" Tải Lên Cấu Hình ")])),_:1}),s("button",{onClick:e[0]||(e[0]=l=>t.$emit("close")),class:"text-gray-500 hover:text-gray-700"},[o(f,{path:r(_),size:"24"},null,8,["path"])])]),s("form",{onSubmit:n(V,["prevent"]),class:"space-y-6"},[s("div",K,[e[5]||(e[5]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Loại Cấu Hình ",-1)),B(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.type=l),class:"form-select w-full rounded-md"},[(i(!0),d(N,null,M(w.configTypes,(l,h)=>(i(),d("option",{key:h,value:h},g(l.name),9,O))),128))],512),[[L,a.type]])]),s("div",{class:S(["border-2 border-dashed rounded-lg p-6 text-center",{"border-blue-500 bg-blue-50":c.value}]),onDragenter:n(x,["prevent"]),onDragover:n(x,["prevent"]),onDragleave:n(x,["prevent"]),onDrop:n($,["prevent"])},[a.file?(i(),d("div",X,[s("div",Q,[s("div",W,[o(f,{path:r(A),size:"24",class:"text-gray-400"},null,8,["path"]),s("span",Z,g(a.file.name),1)]),s("button",{type:"button",class:"text-red-500 hover:text-red-600",onClick:z},[o(f,{path:r(_),size:"20"},null,8,["path"])])]),m.value?(i(),d("div",ee,[e[8]||(e[8]=s("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Xem Trước: ",-1)),s("pre",te,"                  "+g(m.value)+`
                `,1)])):I("",!0)])):(i(),d("div",R,[o(f,{path:r(P),size:"48",class:"mx-auto mb-4 text-gray-400"},null,8,["path"]),s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e[6]||(e[6]=k(" Kéo thả file hoặc ")),s("button",{type:"button",class:"text-blue-500 hover:text-blue-600",onClick:T}," chọn file ")]),e[7]||(e[7]=s("p",{class:"mt-2 text-xs text-gray-500"}," Hỗ trợ file .txt và .json ",-1))]))],34),s("input",{ref_key:"fileInput",ref:p,type:"file",accept:".txt,.json",class:"hidden",onChange:F},null,544),s("div",se,[o(C,{type:"button",label:"Hủy",color:"white",onClick:e[2]||(e[2]=l=>t.$emit("close"))}),o(C,{type:"submit",label:"Tải Lên",color:"info",loading:v.value,disabled:!a.file},null,8,["loading","disabled"])])],32)]),_:1})])]),_:1}))}};export{ze as default};
