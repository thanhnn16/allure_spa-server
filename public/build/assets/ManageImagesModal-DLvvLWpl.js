import{C as b}from"./CardBoxModal-DKfmyhy3.js";import"./@inertiajs-D0DMCEQB.js";import"./colors-S7_1wET5.js";import{r as u,aU as s,a0 as x,bH as k,a3 as e,a2 as n,F as _,b0 as w,a9 as C,aI as E,a1 as V}from"./@vue-BRgAy5zV.js";import"./@mdi-DPpcS9jm.js";import"./BaseButton-eMTGofBM.js";import"./BaseIcon-B4kwkOCn.js";import"./BaseButtons-B17KSMwc.js";import"./CardBox-jfYP3QDG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./OverlayLayer-BSs7OF78.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";const B={class:"space-y-6"},M={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},N=["src","alt"],F=["onClick"],P={key:1,class:"text-gray-500 dark:text-gray-400 text-center"},S={class:"space-y-4"},T={class:"flex items-center justify-center w-full"},j={class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-dark-bg dark:bg-dark-surface hover:bg-gray-100"},I={key:0,class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},ue={__name:"ManageImagesModal",props:{modelValue:Boolean,service:Object},emits:["update:modelValue","close","updated"],setup(o,{emit:h}){const g=o,d=h,c=u(null),l=u(0),f=a=>{d("update:modelValue",a)},m=()=>{l.value=0,d("close")},y=async a=>{const t=a.target.files;if(!t.length)return;const r=new FormData;Array.from(t).forEach(i=>{r.append("images[]",i)});try{if(!(await fetch(`/api/services/${g.service.id}/images`,{method:"POST",body:r,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},onUploadProgress:p=>{l.value=Math.round(p.loaded*100/p.total)}})).ok)throw new Error("Upload failed");d("updated"),c.value.value="",l.value=0}catch(i){console.error("Error uploading images:",i)}},v=async a=>{try{if(!(await fetch(`/api/media/${a}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok)throw new Error("Delete failed");d("updated")}catch(t){console.error("Error deleting image:",t)}};return(a,t)=>(s(),x(b,{"model-value":o.modelValue,"onUpdate:modelValue":f,title:"Quản lý hình ảnh",button:"primary","button-label":"Đóng","has-cancel":"",onConfirm:m,onCancel:m},{default:k(()=>[e("div",B,[o.service.media&&o.service.media.length>0?(s(),n("div",M,[(s(!0),n(_,null,w(o.service.media,r=>(s(),n("div",{key:r.id,class:"relative group"},[e("img",{src:r.file_path.startsWith("http")?r.file_path:`/storage/${r.file_path}`,alt:o.service.service_name,class:"w-full h-48 object-cover rounded-lg"},null,8,N),e("button",{onClick:i=>v(r.id),class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},t[0]||(t[0]=[e("i",{class:"mdi mdi-close text-base"},null,-1)]),8,F)]))),128))])):(s(),n("p",P," Chưa có hình ảnh nào ")),e("div",S,[e("div",T,[e("label",j,[t[1]||(t[1]=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("i",{class:"mdi mdi-upload text-4xl mb-4 text-gray-500 dark:text-gray-400"}),e("p",{class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},[e("span",{class:"font-semibold"},"Nhấp để tải lên"),C(" hoặc kéo và thả ")]),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," PNG, JPG hoặc JPEG (Tối đa 10MB) ")],-1)),e("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:y,ref_key:"fileInput",ref:c},null,544)])]),l.value>0?(s(),n("div",I,[e("div",{class:"bg-primary-600 h-2.5 rounded-full",style:E({width:`${l.value}%`})},null,4)])):V("",!0)])])]),_:1},8,["model-value"]))}};export{ue as default};
