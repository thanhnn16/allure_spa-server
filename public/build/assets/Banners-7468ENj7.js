import{e as M,r as _,aU as x,a0 as E,bH as i,aa as o,bl as l,a3 as r,a9 as h,bf as u,j as N,a2 as w,bM as L,a1 as V,bJ as z,bw as A}from"./@vue-BRgAy5zV.js";import{T as I,Z as q,F as m}from"./@inertiajs-D0DMCEQB.js";import{L as F}from"./LayoutAuthenticated-Rje8YUAB.js";import{_ as H}from"./SectionMain-Vot1TOkK.js";import{_ as O}from"./CardBox-jfYP3QDG.js";import{_ as c}from"./BaseButton-eMTGofBM.js";import{_ as p}from"./FormField-Da_P6kO8.js";import{_ as b}from"./FormControl-BSsARiYM.js";import{b as P,a4 as K,c as Q,a5 as R,d as J,e as Z,q as G}from"./@mdi-DWfqH7fj.js";import{d as W}from"./vuedraggable-PQsNXkfY.js";import{u as X}from"./vue-toastification-ejyjJRED.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-CZHYfFzt.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";import"./main-BNmBi4-k.js";import"./vue-CDKZA3dg.js";import"./sortablejs-DE-2RQke.js";const Y={class:"flex justify-between items-center mb-6"},ee={class:"group relative bg-white dark:bg-dark-surface rounded-xl shadow-md hover:shadow-lg transition-all duration-300"},te={class:"absolute top-2 right-2 z-10"},re={class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-800/70 text-white"},ae={class:"absolute top-2 left-2 cursor-move opacity-0 group-hover:opacity-100 transition-opacity z-10"},oe={class:"relative h-48 overflow-hidden rounded-t-xl"},le=["src","alt"],se={class:"p-4"},ie={class:"flex justify-between items-start mb-3"},de={class:"text-lg font-semibold text-gray-800 dark:text-white"},ne={class:"flex space-x-2"},ue={class:"text-gray-600 dark:text-gray-300 text-sm line-clamp-2 mb-3"},ce={class:"flex flex-wrap gap-2 text-xs"},me={class:"px-2 py-1 rounded-full bg-gray-100 dark:bg-dark-border text-gray-600 dark:text-gray-300"},pe={class:"px-2 py-1 rounded-full bg-gray-100 dark:bg-dark-border text-gray-600 dark:text-gray-300"},ge={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},fe={class:"flex items-center justify-center min-h-screen px-4"},be={class:"relative bg-white dark:bg-dark-surface rounded-xl shadow-xl w-full max-w-md p-6 transform transition-all"},ye={class:"text-xl font-semibold mb-4 text-gray-800 dark:text-white"},ke={class:"space-y-2"},_e={key:0,class:"relative w-full h-32 rounded-lg overflow-hidden bg-gray-100 dark:bg-dark-border"},xe=["src"],ve={class:"grid grid-cols-2 gap-4"},he={class:"flex justify-end space-x-2 mt-6"},kt={__name:"Banners",props:{banners:{type:Array,required:!0}},setup(C){const v=C;M(()=>v.banners,s=>{y.value=[...s].sort((t,e)=>t.order-e.order)});const y=_([...v.banners].sort((s,t)=>s.order-t.order)),a=I({title:"",description:"",image:null,link_url:"",start_date:"",end_date:"",is_active:!0}),g=_(!1),d=_(null),f=_(null),k=X(),B=s=>{const t=s.target.files[0];if(t){a.image=t;const e=new FileReader;e.onload=n=>{f.value=n.target.result},e.readAsDataURL(t)}},$=()=>{d.value=null,a.reset(),f.value=null,g.value=!0},D=s=>{d.value=s,a.title=s.title,a.description=s.description,a.link_url=s.link_url,a.start_date=s.start_date,a.end_date=s.end_date,a.is_active=s.is_active,f.value=s.full_image_url,g.value=!0},T=()=>{d.value?a.put(route("banners.update",d.value.id),{onSuccess:()=>{g.value=!1,m.reload()}}):a.post(route("banners.store"),{onSuccess:()=>{g.value=!1,m.reload()}})},U=s=>{confirm("Bạn có chắc chắn muốn xóa banner này?")&&a.delete(route("banners.destroy",s.id),{onSuccess:()=>{m.reload()}})},j=async s=>{const t=y.value.map((e,n)=>({id:e.id,order:n+1}));try{await axios.post(route("banners.reorder"),{orders:t}),k.success("Cập nhật thứ tự banner thành công"),m.reload()}catch(e){console.error("Error updating order:",e),k.error("Cập nhật thứ tự banner thất bại"),m.reload()}},S=async s=>{var t,e;try{await axios.post(route("banners.toggle",s.id)),k.success("Cập nhật trạng thái banner thành công"),m.reload()}catch(n){k.error(((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.message)||"Cập nhật trạng thái banner thất bại"),m.reload()}};return(s,t)=>(x(),E(F,null,{default:i(()=>[o(l(q),{title:"Banners"}),o(H,null,{default:i(()=>[o(O,{class:"mb-6"},{default:i(()=>[r("div",Y,[t[10]||(t[10]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"Quản lý Banner"),r("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Quản lý banner của website")],-1)),o(c,{icon:l(P),color:"info",onClick:$,class:"shadow-lg hover:shadow-xl transition-shadow"},{default:i(()=>t[9]||(t[9]=[h(" Thêm Banner ")])),_:1},8,["icon"])]),o(l(W),{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",onEnd:j,"item-key":"id"},{item:i(({element:e})=>[r("div",ee,[r("div",te,[r("span",re," Thứ tự: "+u(e.order),1)]),r("div",ae,[o(c,{icon:l(K),color:"light",small:""},null,8,["icon"])]),r("div",oe,[r("img",{src:e.full_image_url,alt:e.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"},null,8,le),t[11]||(t[11]=r("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"},null,-1))]),r("div",se,[r("div",ie,[r("h3",de,u(e.title),1),r("div",ne,[o(c,{icon:e.is_active?l(Q):l(R),color:e.is_active?"success":"light",small:"",onClick:n=>S(e),loading:l(a).processing,disabled:l(a).processing,tooltip:e.is_active?"Deactivate":"Activate"},null,8,["icon","color","onClick","loading","disabled","tooltip"]),o(c,{icon:l(J),color:"info",small:"",onClick:n=>D(e)},null,8,["icon","onClick"]),o(c,{icon:l(Z),color:"danger",small:"",onClick:n=>U(e)},null,8,["icon","onClick"])])]),r("p",ue,u(e.description),1),r("div",ce,[r("span",me,u(new Date(e.start_date).toLocaleDateString()),1),r("span",pe,u(new Date(e.end_date).toLocaleDateString()),1),r("span",{class:N(["px-2 py-1 rounded-full",e.is_active?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},u(e.is_active?"Đang hoạt động":"Không hoạt động"),3)])])])]),_:1},8,["modelValue"])]),_:1})]),_:1}),g.value?(x(),w("div",ge,[r("div",fe,[t[13]||(t[13]=r("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"},null,-1)),r("div",be,[r("h2",ye,u(d.value?"Chỉnh sửa Banner":"Tạo Banner mới"),1),r("form",{onSubmit:L(T,["prevent"]),class:"space-y-4"},[o(p,{label:"Tiêu đề",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[o(b,{modelValue:l(a).title,"onUpdate:modelValue":t[1]||(t[1]=e=>l(a).title=e),type:"text",required:"",class:"w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface dark:text-white focus:border-primary-500 dark:focus:border-primary-400"},null,8,["modelValue"])]),_:1}),o(p,{label:"Mô tả",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[o(b,{modelValue:l(a).description,"onUpdate:modelValue":t[2]||(t[2]=e=>l(a).description=e),type:"textarea",class:"w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface dark:text-white focus:border-primary-500 dark:focus:border-primary-400"},null,8,["modelValue"])]),_:1}),o(p,{label:"Hình ảnh",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[r("input",{type:"file",onChange:B,accept:"image/*",class:"hidden",ref:"fileInput"},null,544),r("div",ke,[f.value||d.value&&d.value.full_image_url?(x(),w("div",_e,[r("img",{src:f.value||d.value&&d.value.full_image_url,class:"w-full h-full object-cover",alt:"Banner preview"},null,8,xe)])):V("",!0),o(c,{icon:l(G),color:"info",onClick:t[3]||(t[3]=e=>s.$refs.fileInput.click()),class:"w-full justify-center"},{default:i(()=>[h(u(f.value||d.value&&d.value.full_image_url?"Đổi hình ảnh":"Tải hình ảnh"),1)]),_:1},8,["icon"])])]),_:1}),r("div",ve,[o(p,{label:"Ngày bắt đầu",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[o(b,{modelValue:l(a).start_date,"onUpdate:modelValue":t[4]||(t[4]=e=>l(a).start_date=e),type:"date",class:"w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface dark:text-white focus:border-primary-500 dark:focus:border-primary-400"},null,8,["modelValue"])]),_:1}),o(p,{label:"Ngày kết thúc",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[o(b,{modelValue:l(a).end_date,"onUpdate:modelValue":t[5]||(t[5]=e=>l(a).end_date=e),type:"date",class:"w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface dark:text-white focus:border-primary-500 dark:focus:border-primary-400"},null,8,["modelValue"])]),_:1})]),o(p,{label:"Đường dẫn liên kết",class:"text-gray-700 dark:text-gray-200"},{default:i(()=>[o(b,{modelValue:l(a).link_url,"onUpdate:modelValue":t[6]||(t[6]=e=>l(a).link_url=e),type:"url",class:"w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface dark:text-white focus:border-primary-500 dark:focus:border-primary-400"},null,8,["modelValue"])]),_:1}),o(p,{class:"flex items-center space-x-2"},{default:i(()=>[z(r("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>l(a).is_active=e),class:"rounded border-gray-300 dark:border-dark-border text-primary-600 focus:ring-primary-500 dark:bg-dark-surface"},null,512),[[A,l(a).is_active]]),t[12]||(t[12]=r("span",{class:"text-gray-700 dark:text-gray-200"},"Kích hoạt",-1))]),_:1}),r("div",he,[o(c,{type:"button",color:"light",onClick:t[8]||(t[8]=e=>g.value=!1),label:"Hủy",class:"px-4 py-2 text-gray-700 dark:text-gray-200"}),o(c,{type:"submit",color:"info",loading:l(a).processing,label:d.value?"Cập nhật":"Tạo mới",class:"px-4 py-2"},null,8,["loading","label"])])],32)])])])):V("",!0)]),_:1}))}};export{kt as default};
