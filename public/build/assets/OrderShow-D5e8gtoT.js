import{Z as Ie,i as Be,F as M}from"./@inertiajs-D0DMCEQB.js";import{L as Ue}from"./LayoutAuthenticated-CYKEA5IJ.js";import{_ as Ne}from"./SectionMain-Vot1TOkK.js";import{_ as Pe}from"./CardBox-jfYP3QDG.js";import{c as V,aU as m,a2 as p,a3 as e,j as U,a9 as b,bf as h,r as w,e as E,a0 as P,bH as _,bJ as O,F as H,b0 as X,bz as He,bA as Q,a1 as C,b2 as j,aa as S}from"./@vue-BRgAy5zV.js";import{C as D}from"./CardBoxModal-CC98zKJS.js";import{a as I}from"./axios-CCb-kr4I.js";import{u as R}from"./vue-toastification-ejyjJRED.js";import{_ as Oe}from"./BaseIcon-B4kwkOCn.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./@mdi-ArhfA4cU.js";import"./app-JwE5mE-x.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";import"./BaseButton-eMTGofBM.js";import"./BaseButtons-B17KSMwc.js";const Qe={__name:"StatusBadge",props:{status:{type:String,required:!0,validator:n=>["pending","confirmed","shipping","completed","cancelled"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)}},setup(n){const t=n,o=V(()=>`inline-flex items-center font-medium rounded-full ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"}[t.size]}`),s={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",confirmed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",shipping:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},f={pending:"bg-yellow-400",confirmed:"bg-blue-400",shipping:"bg-purple-400",completed:"bg-green-400",cancelled:"bg-red-400"},y={pending:"Chờ xác nhận",confirmed:"Đã xác nhận",shipping:"Đang giao hàng",completed:"Hoàn thành",cancelled:"Đã hủy"};return(x,v)=>(m(),p("span",{class:U([o.value,s[n.status]])},[e("span",{class:U(["w-2 h-2 rounded-full mr-2",f[n.status]])},null,2),b(" "+h(y[n.status]),1)],2))}},De={__name:"PaymentStatusBadge",props:{status:{type:String,required:!0,validator:n=>["pending","partial","paid","cancelled"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)}},setup(n){const t=n,o=V(()=>`inline-flex items-center font-medium rounded-full ${{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"}[t.size]}`),s={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",partial:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",paid:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},f={pending:"bg-yellow-400",partial:"bg-blue-400",paid:"bg-green-400",cancelled:"bg-red-400"},y={pending:"Chờ thanh toán",partial:"Thanh toán một phần",paid:"Đã thanh toán",cancelled:"Đã hủy"};return(x,v)=>(m(),p("span",{class:U([o.value,s[n.status]])},[e("span",{class:U(["w-2 h-2 rounded-full mr-2",f[n.status]])},null,2),b(" "+h(y[n.status]),1)],2))}},Le="inline-flex items-center px-2 py-1 text-xs font-medium rounded-full",ze={__name:"ItemTypeBadge",props:{type:{type:String,required:!0,validator:n=>["product","service"].includes(n)}},setup(n){const t={product:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",service:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},o={product:"mdi-package-variant",service:"mdi-spa"},s={product:"Sản phẩm",service:"Dịch vụ"};return(f,y)=>(m(),p("span",{class:U([Le,t[n.type]])},[e("i",{class:U(["mdi mr-1",o[n.type]])},null,2),b(" "+h(s[n.type]),1)],2))}},Ae={class:"space-y-4"},qe=["value"],Fe={class:"flex justify-end space-x-3 pt-4"},Ge=["disabled"],Xe={key:0,class:"mdi mdi-loading mdi-spin mr-2"},Ke={__name:"UpdateStatusModal",props:{modelValue:Boolean,order:Object,availableStatuses:Array},emits:["update:modelValue","updated"],setup(n,{emit:t}){const o=n,s=t,f=w(o.order.status),y=w(""),x=w(!1);E(()=>o.modelValue,i=>{i||(f.value=o.order.status,y.value="",x.value=!1)});const v=i=>({pending:"Chờ xác nhận",confirmed:"Đã xác nhận",shipping:"Đang giao hàng",completed:"Hoàn thành",cancelled:"Đã hủy"})[i],g=async()=>{if(!x.value){x.value=!0;try{s("updated",{status:f.value,note:y.value})}catch(i){console.error("Error in handleSubmit:",i)}}};return(i,l)=>(m(),P(D,{"model-value":n.modelValue,"onUpdate:modelValue":l[3]||(l[3]=u=>i.$emit("update:modelValue",u)),title:"Cập nhật trạng thái đơn hàng","has-button":!1},{default:_(()=>[e("div",Ae,[e("div",null,[l[4]||(l[4]=e("label",{class:"block text-sm font-medium mb-2"},"Trạng thái mới",-1)),O(e("select",{"onUpdate:modelValue":l[0]||(l[0]=u=>f.value=u),class:"form-select w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface"},[(m(!0),p(H,null,X(n.availableStatuses,u=>(m(),p("option",{key:u,value:u},h(v(u)),9,qe))),128))],512),[[He,f.value]])]),e("div",null,[l[5]||(l[5]=e("label",{class:"block text-sm font-medium mb-2"},"Ghi chú (tùy chọn)",-1)),O(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=u=>y.value=u),rows:"3",class:"form-textarea w-full rounded-lg border-gray-300 dark:border-dark-border dark:bg-dark-surface",placeholder:"Nhập ghi chú cho việc cập nhật trạng thái"},null,512),[[Q,y.value]])]),e("div",Fe,[e("button",{onClick:l[2]||(l[2]=u=>i.$emit("update:modelValue",!1)),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-dark-border hover:bg-gray-50 dark:hover:bg-dark-bg/50 transition-colors duration-200"}," Hủy "),e("button",{onClick:g,disabled:x.value,class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(m(),p("i",Xe)):C("",!0),l[6]||(l[6]=b(" Cập nhật "))],8,Ge)])])]),_:1},8,["model-value"]))}},Je={class:"p-6"},Ze={class:"text-lg font-medium mb-4"},Re={class:"space-y-4"},We={class:"bg-gray-50 dark:bg-dark-bg/50 p-4 rounded-lg"},Ye={class:"flex justify-between mb-2"},$e={class:"font-medium"},et={class:"flex justify-between"},tt={class:"text-green-600"},nt={class:"flex justify-between pt-2 border-t mt-2"},rt={class:"font-medium"},st={class:"mt-6 flex justify-end space-x-3"},ot=["disabled"],at={key:0,class:"mdi mdi-loading mdi-spin mr-2"},lt={__name:"CreateInvoiceModal",props:{modelValue:Boolean,order:Object},emits:["update:modelValue","created"],setup(n,{emit:t}){const o=t,s=w(""),f=w(!1),y=v=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(v),x=async()=>{f.value=!0;try{await o("created",{note:s.value}),s.value=""}catch(v){console.error("Error creating invoice:",v)}finally{f.value=!1}};return(v,g)=>(m(),P(D,{"model-value":n.modelValue,"onUpdate:modelValue":g[2]||(g[2]=i=>v.$emit("update:modelValue",i)),title:"Tạo hóa đơn cho đơn hàng #{{ order.id }}","has-button":!1},{default:_(()=>[e("div",Je,[e("h3",Ze," Tạo hóa đơn cho đơn hàng #"+h(n.order.id),1),e("div",Re,[e("div",We,[e("div",Ye,[g[3]||(g[3]=e("span",{class:"text-gray-500"},"Tổng tiền:",-1)),e("span",$e,h(y(n.order.total_amount)),1)]),e("div",et,[g[4]||(g[4]=e("span",{class:"text-gray-500"},"Giảm giá:",-1)),e("span",tt,"-"+h(y(n.order.discount_amount)),1)]),e("div",nt,[g[5]||(g[5]=e("span",{class:"font-medium"},"Thành tiền:",-1)),e("span",rt,h(y(n.order.total_amount-n.order.discount_amount)),1)])]),e("div",null,[g[6]||(g[6]=e("label",{class:"block text-sm font-medium mb-2"},"Ghi chú (tùy chọn)",-1)),O(e("textarea",{"onUpdate:modelValue":g[0]||(g[0]=i=>s.value=i),rows:"3",class:"form-textarea w-full",placeholder:"Nhập ghi chú cho hóa đơn"},null,512),[[Q,s.value]])])]),e("div",st,[e("button",{onClick:g[1]||(g[1]=i=>v.$emit("update:modelValue",!1)),class:"btn-secondary"}," Hủy "),e("button",{onClick:x,disabled:f.value,class:"btn-primary"},[f.value?(m(),p("i",at)):C("",!0),g[7]||(g[7]=b(" Tạo hóa đơn "))],8,ot)])])]),_:1},8,["model-value"]))}},dt={class:"space-y-6"},it={class:"text-center"},ct={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},ut={key:0,class:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4"},mt={class:"flex justify-end space-x-3"},gt=["disabled"],ht={key:0,class:"mdi mdi-loading mdi-spin mr-2"},pt={key:1,class:"mdi mdi-check-circle mr-2"},ft={__name:"CompleteOrderModal",props:{modelValue:Boolean,order:{type:Object,required:!0},hasServiceCombo:{type:Boolean,default:!1}},emits:["update:modelValue","completed"],setup(n,{emit:t}){const o=n,s=t,f=w(""),y=w(!1),x=V(()=>{var g;return((g=o.order.invoice)==null?void 0:g.status)==="paid"}),v=async()=>{var g,i;if(x.value){y.value=!0;try{(await I.post(`/api/orders/${o.order.id}/complete`,{note:f.value})).data.success&&(s("completed"),s("update:modelValue",!1),f.value="")}catch(l){const u=((i=(g=l.response)==null?void 0:g.data)==null?void 0:i.message)||"Có lỗi xảy ra khi hoàn thành đơn hàng";console.error("Error completing order:",u)}finally{y.value=!1}}};return(g,i)=>(m(),P(D,{"model-value":n.modelValue,"onUpdate:modelValue":i[2]||(i[2]=l=>g.$emit("update:modelValue",l)),title:"Hoàn thành đơn hàng","has-button":!1},{default:_(()=>[e("div",dt,[e("div",it,[i[3]||(i[3]=e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4"},[e("i",{class:"mdi mdi-check-circle text-4xl text-green-600 dark:text-green-400"})],-1)),e("h3",ct," Hoàn thành đơn hàng #"+h(n.order.id),1),i[4]||(i[4]=e("p",{class:"text-gray-600 dark:text-gray-400 mt-2"}," Xác nhận hoàn thành và tạo gói dịch vụ cho khách hàng ",-1))]),n.hasServiceCombo?(m(),p("div",ut,i[5]||(i[5]=[e("div",{class:"flex items-start"},[e("i",{class:"mdi mdi-information text-blue-500 text-xl mt-0.5 mr-3"}),e("div",null,[e("h4",{class:"font-medium text-blue-900 dark:text-blue-300"}," Thông tin gói dịch vụ "),e("ul",{class:"mt-2 space-y-2 text-sm text-blue-700 dark:text-blue-400"},[e("li",{class:"flex items-center"},[e("i",{class:"mdi mdi-check-circle-outline mr-2"}),b(" Hệ thống sẽ tự động tạo gói liệu trình cho khách hàng ")]),e("li",{class:"flex items-center"},[e("i",{class:"mdi mdi-check-circle-outline mr-2"}),b(" Khách hàng có thể bắt đầu đặt lịch sau khi gói được tạo ")])])])],-1)]))):C("",!0),e("div",null,[i[6]||(i[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ghi chú hoàn thành ",-1)),O(e("textarea",{"onUpdate:modelValue":i[0]||(i[0]=l=>f.value=l),rows:"3",class:"form-textarea w-full rounded-lg border-gray-300 dark:border-gray-700 dark:bg-gray-800",placeholder:"Nhập ghi chú khi hoàn thành đơn hàng (tùy chọn)"},"                ",512),[[Q,f.value]])]),e("div",mt,[e("button",{onClick:i[1]||(i[1]=l=>g.$emit("update:modelValue",!1)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"}," Hủy "),e("button",{onClick:v,disabled:y.value,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(m(),p("i",ht)):(m(),p("i",pt)),i[7]||(i[7]=b(" Hoàn thành đơn hàng "))],8,gt)])])]),_:1},8,["model-value"]))}},yt={class:"p-6"},bt={class:"space-y-4"},xt={class:"bg-gray-50 dark:bg-dark-bg/50 p-4 rounded-lg"},vt={class:"flex justify-between mb-2"},kt={class:"font-medium"},Ct={key:0,class:"flex justify-between text-red-600"},wt={class:"mt-6 flex justify-end space-x-3"},_t=["disabled"],St={key:0,class:"mdi mdi-loading mdi-spin mr-2"},Vt={__name:"CancelOrderModal",props:{modelValue:Boolean,order:{type:Object,required:!0},title:String},emits:["update:modelValue","cancelled"],setup(n,{emit:t}){const o=n,s=t,f=w(""),y=w(!1),x=R(),v=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),g=async()=>{var i,l;if(!f.value.trim()){x.error("Vui lòng nhập lý do hủy đơn hàng");return}y.value=!0;try{(await I.patch(`/api/orders/${o.order.id}/cancel`,{note:f.value})).data.success&&(x.success("Hủy đơn hàng thành công"),s("cancelled",{reason:f.value}),s("update:modelValue",!1))}catch(u){console.error("Error canceling order:",u),x.error(((l=(i=u.response)==null?void 0:i.data)==null?void 0:l.message)||"Có lỗi xảy ra khi hủy đơn hàng")}finally{y.value=!1}};return E(()=>o.modelValue,i=>{i||(f.value="",y.value=!1)}),(i,l)=>(m(),P(D,{"model-value":n.modelValue,"onUpdate:modelValue":l[2]||(l[2]=u=>i.$emit("update:modelValue",u)),title:n.title,"has-button":!1},{default:_(()=>[e("div",yt,[e("div",bt,[l[6]||(l[6]=e("div",{class:"bg-red-50 dark:bg-red-900/30 p-4 rounded-lg"},[e("div",{class:"flex"},[e("i",{class:"mdi mdi-alert text-red-400 text-xl mr-3"}),e("div",null,[e("h4",{class:"font-medium text-red-800 dark:text-red-300"}," Cảnh báo "),e("p",{class:"text-sm text-red-700 dark:text-red-400"}," Bạn chắc chắn muốn hủy đơn hàng này? Hành động này không thể hoàn tác. ")])])],-1)),e("div",xt,[e("div",vt,[l[3]||(l[3]=e("span",{class:"text-gray-500"},"Tổng tiền:",-1)),e("span",kt,h(v(n.order.total_amount)),1)]),n.order.invoice?(m(),p("div",Ct,[l[4]||(l[4]=e("span",null,"Đã thanh toán:",-1)),e("span",null,h(v(n.order.invoice.paid_amount)),1)])):C("",!0)]),e("div",null,[l[5]||(l[5]=e("label",{for:"cancel-reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Lý do hủy đơn ",-1)),O(e("textarea",{id:"cancel-reason","onUpdate:modelValue":l[0]||(l[0]=u=>f.value=u),rows:"3",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-dark-surface text-gray-900 dark:text-gray-100 focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-400 dark:focus:ring-primary-400 shadow-sm",placeholder:"Nhập lý do hủy đơn hàng..."},null,512),[[Q,f.value]])])]),e("div",wt,[e("button",{onClick:l[1]||(l[1]=u=>i.$emit("update:modelValue",!1)),class:"btn-secondary"}," Đóng "),e("button",{onClick:g,disabled:y.value,class:"btn-danger"},[y.value?(m(),p("i",St)):C("",!0),l[7]||(l[7]=b(" Xác nhận hủy "))],8,_t)])])]),_:1},8,["model-value","title"]))}},Tt={name:"OrderShow",components:{Head:Ie,Link:Be,LayoutAuthenticated:Ue,SectionMain:Ne,CardBox:Pe,StatusBadge:Qe,PaymentStatusBadge:De,ItemTypeBadge:ze,UpdateStatusModal:Ke,CreateInvoiceModal:lt,CompleteOrderModal:ft,CancelOrderModal:Vt,BaseIcon:Oe},props:{order:Object},setup(n){const t=w(!1),o=w(!1),s=w(!1),f=w(!1),y=w(!1),x=w(n.order.status),v=w(""),g=w(""),i=w(""),l=w(""),u=R(),k=w(!1),L=r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),z=r=>new Date(r).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=r=>{const a="px-2 inline-flex text-xs leading-5 font-semibold rounded-full items-center transition-colors duration-150";return{pending:`${a} bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300`,confirmed:`${a} bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,shipping:`${a} bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300`,completed:`${a} bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300`,cancelled:`${a} bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300`}[r]||`${a} bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300`},q=r=>({pending:"bg-yellow-400",confirmed:"bg-blue-400",shipping:"bg-purple-400",completed:"bg-green-400",cancelled:"bg-red-400"})[r]||"bg-gray-400",F=r=>{const a="text-sm font-medium";return{pending:`${a} text-yellow-600 dark:text-yellow-400`,partial:`${a} text-blue-600 dark:text-blue-400`,paid:`${a} text-green-600 dark:text-green-400`,cancelled:`${a} text-red-600 dark:text-red-400`}[r]||`${a} text-gray-600 dark:text-gray-400`},c=r=>({pending:"Chờ thanh toán",partial:"Thanh toán một phần",paid:"Đã thanh toán",cancelled:"Đã hủy"})[r]||"Không xác định",G=r=>{const a="px-2 inline-flex text-xs leading-5 font-semibold rounded-full";return r==="product"?`${a} bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-400`:`${a} bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-400`},W=V(()=>["pending","confirmed","shipping"].includes(n.order.status)),Y=V(()=>n.order.invoice&&!["paid","cancelled"].includes(n.order.invoice.status)&&n.order.status!=="cancelled"),$=V(()=>!n.order.invoice&&n.order.status!=="cancelled"&&n.order.status!=="completed"),ee=V(()=>{var r;return["confirmed","shipping"].includes(n.order.status)&&((r=n.order.invoice)==null?void 0:r.status)==="paid"}),N=V(()=>n.order.order_items.some(r=>r.item_type==="service"&&["combo_5","combo_10"].includes(r.service_type))),te=async()=>{var r,a;k.value=!0;try{(await I.put(route("orders.update",n.order.id),{status:x.value,note:v.value})).data.success&&(u.success("Cập nhật trạng thái thành công"),M.reload())}catch(d){console.error("Error updating order status:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi cập nhật trạng thái")}finally{k.value=!1,t.value=!1}},ne=async r=>{try{await I.post(`/api/invoices/${n.order.invoice.id}/payments`,r),o.value=!1}catch(a){console.error("Error processing payment:",a)}},re=async()=>{var r,a;k.value=!0;try{const d=await I.post(`/api/orders/${n.order.id}/create-invoice`,{note:g.value});if(d.data.success)u.success("Hóa đơn đã được tạo thành công"),M.visit(route("invoices.show",d.data.data.id));else throw new Error(d.data.message)}catch(d){console.error("Error creating invoice:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi tạo hóa đơn")}finally{k.value=!1,s.value=!1,g.value=""}},K=r=>({pending:"Chờ xác nhận",confirmed:"Đã xác nhận",shipping:"Đang giao hàng",completed:"Hoàn thành",cancelled:"Đã hủy"})[r]||"Không xác định",se=()=>{n.order.invoice&&M.visit(route("invoices.show",n.order.invoice.id))},oe=()=>{n.order.invoice&&M.visit(route("invoices.show",n.order.invoice.id))},ae=()=>{s.value=!0},le=r=>({single:"Đơn lẻ",combo_5:"Combo 5 lần",combo_10:"Combo 10 lần"})[r]||r,de=()=>{x.value=n.order.status,v.value=n.order.note||"",t.value=!0},ie=()=>{f.value=!0,i.value=""},ce=()=>{y.value=!0,l.value=""},ue=async()=>{var r,a;k.value=!0;try{(await I.post(`/api/orders/${n.order.id}/complete`,{note:i.value})).data.success&&(u.success("Đơn hàng đã được hoàn thành thành công"),N.value&&u.info("Các gói liệu trình đã được tạo cho khách hàng"),M.reload())}catch(d){console.error("Error completing order:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi hoàn thành đơn hàng")}finally{k.value=!1,f.value=!1}},me=async()=>{var r,a;k.value=!0;try{(await I.post(`/api/orders/${n.order.id}/cancel`,{note:l.value})).data.success&&(u.success("Đơn hàng đã được hủy thành công"),M.reload())}catch(d){console.error("Error canceling order:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi hủy đơn hàng")}finally{k.value=!1,y.value=!1}},ge=V(()=>({pending:["confirmed","cancelled"],confirmed:["shipping","completed","cancelled"],shipping:["completed","cancelled"],completed:[],cancelled:[]})[n.order.status]||[]),he=V(()=>{var a;const r=[];return r.push({id:"created",content:"Đơn hàng được tạo",datetime:n.order.created_at,iconClass:"mdi mdi-plus-circle",iconBackground:"bg-blue-500"}),(a=n.order.status_histories)!=null&&a.length&&n.order.status_histories.forEach(d=>{r.push({id:d.id,content:`Trạng thái đơn hàng thay đổi thành "${K(d.status)}"${d.note?` - ${d.note}`:""}`,datetime:d.created_at,iconClass:"mdi mdi-clipboard-check",iconBackground:"bg-green-500"})}),n.order.status==="completed"?r.push({id:"completed",content:"Đơn hàng hoàn thành",datetime:n.order.completed_at||n.order.updated_at,iconClass:"mdi mdi-check-circle",iconBackground:"bg-green-600"}):n.order.status==="cancelled"&&r.push({id:"cancelled",content:"Đơn hàng đã hủy",datetime:n.order.cancelled_at||n.order.updated_at,iconClass:"mdi mdi-close-circle",iconBackground:"bg-red-600"}),r.sort((d,T)=>new Date(T.datetime)-new Date(d.datetime))}),pe=r=>new Date(r).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),fe=async r=>{var a,d;k.value=!0;try{const T=await I.put(route("orders.update",n.order.id),{status:r.status,note:r.note});if(T.data.success)u.success("Cập nhật trạng thái thành công"),M.reload();else throw new Error(T.data.message||"Có lỗi xảy ra")}catch(T){console.error("Error updating order status:",T),u.error(((d=(a=T.response)==null?void 0:a.data)==null?void 0:d.message)||"Có lỗi xảy ra khi cập nhật trạng thái")}finally{k.value=!1,t.value=!1}},ye=async r=>{var a,d,T;k.value=!0;try{const B=await I.post(`/api/orders/${n.order.id}/create-invoice`,{note:r.note});if(B.data.success)u.success("Tạo hóa đơn thành công"),(a=B.data.data)!=null&&a.id?M.visit(route("invoices.show",B.data.data.id)):M.reload();else throw new Error(B.data.message||"Có lỗi xảy ra")}catch(B){console.error("Error creating invoice:",B),u.error(((T=(d=B.response)==null?void 0:d.data)==null?void 0:T.message)||"Có lỗi xảy ra khi tạo hóa đơn")}finally{k.value=!1,s.value=!1}},be=()=>{u.success("Đơn hàng đã được hoàn thành thành công",{timeout:3e3}),N.value&&u.info("Các gói liệu trình đã được tạo cho khách hàng",{timeout:4e3}),M.reload()},xe=()=>{M.reload()},ve=r=>r.item_name,ke=r=>{var a,d;return((a=r.product)==null?void 0:a.image)||((d=r.service)==null?void 0:d.image)||null},Ce=V(()=>["pending","confirmed"].includes(n.order.status)&&(!n.order.invoice||n.order.invoice.status==="pending"));E(()=>t.value,r=>{r||(v.value="",x.value=n.order.status)}),E(()=>y.value,r=>{r||(l.value="")});const we=r=>r?`${r.ward}, ${r.district}, ${r.province}`:"",_e=V(()=>{var r,a;return n.order.status==="completed"?!((r=n.order.userServicePackages)==null?void 0:r.some(T=>T.order_id===n.order.id))&&N.value:["confirmed","shipping"].includes(n.order.status)&&((a=n.order.invoice)==null?void 0:a.status)==="paid"&&N.value}),Se=V(()=>{var Z;const r=n.order.status==="completed",a=N.value,T=(((Z=n.order.user)==null?void 0:Z.user_service_packages)||[]).some(je=>je.order_id===n.order.id);return r&&a&&T}),Ve=V(()=>n.order.status==="pending"),Te=async()=>{var r,a;k.value=!0;try{(await I.put(route("orders.update",n.order.id),{status:"confirmed",note:"Xác nhận đơn hàng"})).data.success&&(u.success("Đơn hàng đã được xác nhận thành công"),M.reload())}catch(d){console.error("Error confirming order:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi xác nhận đơn hàng")}finally{k.value=!1}},Me=V(()=>{var r;return((r=n.order.invoice)==null?void 0:r.status)==="paid"}),J=()=>{var r;return((r=n.order.invoice)==null?void 0:r.status)!=="paid"?(u.warning("Vui lòng thanh toán đơn hàng trước khi thực hiện thao tác này"),!1):!0};return{showStatusModal:t,showPaymentModal:o,showCreateInvoiceModal:s,showCompleteModal:f,showCancelModal:y,newStatus:x,statusNote:v,invoiceNote:g,completeNote:i,cancelNote:l,formatCurrency:L,formatDate:z,getStatusClass:A,getStatusDotClass:q,getPaymentStatusClass:F,getPaymentStatusText:c,getItemTypeClass:G,canUpdateStatus:W,canProcessPayment:Y,canCreateInvoice:$,canComplete:ee,hasServiceCombo:N,updateOrderStatus:te,processPayment:ne,createInvoice:re,getStatusText:K,goToInvoice:se,openPaymentModal:oe,openCreateInvoiceModal:ae,getServiceTypeText:le,loading:k,openUpdateStatusModal:de,getAvailableStatuses:ge,openCompleteModal:ie,openCancelModal:ce,completeOrder:ue,cancelOrder:me,orderTimeline:he,formatDateTime:pe,handleStatusUpdated:fe,handleInvoiceCreated:ye,handleOrderCompleted:be,handleOrderCancelled:xe,getItemName:ve,getItemImage:ke,canCancel:Ce,formatAddress:we,needsServicePackageCreation:_e,hasCreatedServicePackages:Se,canQuickConfirm:Ve,handleQuickConfirm:Te,canQuickComplete:Me,handleQuickShipping:async()=>{var r,a;if(J()){k.value=!0;try{(await I.put(route("orders.update",n.order.id),{status:"shipping",note:"Chuyển sang trạng thái giao hàng"})).data.success&&(u.success("Đơn hàng đã chuyển sang trạng thái giao hàng"),M.reload())}catch(d){console.error("Error updating order to shipping:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi cập nhật trạng thái")}finally{k.value=!1}}},handleQuickComplete:async()=>{var r,a;if(J()){k.value=!0;try{(await I.post(`/api/orders/${n.order.id}/complete`,{note:"Hoàn thành đơn hàng"})).data.success&&(u.success("Đơn hàng đã được hoàn thành thành công"),N.value&&u.info("Các gói liệu trình đã được tạo cho khách hàng"),M.reload())}catch(d){console.error("Error completing order:",d),u.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Có lỗi xảy ra khi hoàn thành đơn hàng")}finally{k.value=!1}}}}}},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},jt={class:"lg:col-span-2 space-y-6"},It={class:"flex justify-between items-center"},Bt={class:"text-lg font-medium"},Ut={class:"grid grid-cols-2 gap-4"},Nt={class:"space-y-2"},Pt={class:"space-y-2"},Ht={key:0},Ot={class:"mt-4 pt-4 border-t dark:border-dark-border"},Et={key:0,class:"bg-gray-50 dark:bg-dark-bg/50 p-3 rounded-lg"},Qt={class:"font-medium"},Dt={class:"text-gray-600 dark:text-gray-400"},Lt={key:1,class:"text-gray-500 text-sm"},zt={class:"overflow-x-auto"},At={class:"min-w-full divide-y dark:divide-dark-border"},qt={class:"divide-y dark:divide-dark-border"},Ft={class:"px-4 py-4"},Gt={class:"flex items-center"},Xt=["src"],Kt={class:"font-medium"},Jt={class:"text-sm text-gray-500"},Zt={key:0,class:"ml-2"},Rt={class:"px-4 py-4"},Wt={class:"px-4 py-4"},Yt={class:"px-4 py-4 font-medium"},$t={class:"bg-gray-50 dark:bg-dark-bg/50"},en={class:"px-4 py-3 font-medium"},tn={key:0},nn={class:"px-4 py-3 font-medium text-green-600"},rn={class:"border-t dark:border-dark-border"},sn={class:"px-4 py-3 font-medium text-lg"},on={class:"flow-root"},an={role:"list",class:"-mb-8"},ln={class:"relative pb-8"},dn={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200 dark:bg-dark-border","aria-hidden":"true"},cn={class:"relative flex space-x-3"},un={class:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5"},mn={class:"text-sm text-gray-500"},gn={class:"whitespace-nowrap text-right text-sm text-gray-500"},hn=["datetime"],pn={class:"lg:col-span-1 space-y-6"},fn={class:"space-y-4"},yn={class:"flex justify-between items-center"},bn={class:"space-y-3 pt-3 border-t dark:border-dark-border"},xn={key:0,class:"space-y-4"},vn={class:"flex justify-between items-center"},kn={class:"space-y-2"},Cn={class:"flex justify-between"},wn={class:"font-medium"},_n={class:"flex justify-between"},Sn={class:"text-green-600 font-medium"},Vn={class:"flex justify-between"},Tn={class:"text-red-600 font-medium"},Mn={key:1,class:"text-center py-6"};function jn(n,t,o,s,f,y){const x=j("Head"),v=j("StatusBadge"),g=j("CardBox"),i=j("ItemTypeBadge"),l=j("Link"),u=j("PaymentStatusBadge"),k=j("UpdateStatusModal"),L=j("CreateInvoiceModal"),z=j("CompleteOrderModal"),A=j("CancelOrderModal"),q=j("SectionMain"),F=j("LayoutAuthenticated");return m(),P(F,null,{default:_(()=>[S(x,{title:`Chi tiết đơn hàng #${o.order.id}`},null,8,["title"]),S(q,{breadcrumbs:[{label:"Quản lý đơn hàng",href:n.route("orders.index")},{label:`Đơn hàng #${o.order.id}`}]},{default:_(()=>[e("div",Mt,[e("div",jt,[S(g,null,{header:_(()=>[e("div",It,[e("h3",Bt,"Thông tin đơn hàng #"+h(o.order.id),1),S(v,{status:o.order.status},null,8,["status"])])]),default:_(()=>{var c;return[e("div",Ut,[e("div",null,[t[16]||(t[16]=e("h4",{class:"font-medium mb-2"},"Thông tin khách hàng",-1)),e("div",Nt,[e("p",null,[t[13]||(t[13]=e("span",{class:"text-gray-500"},"Họ tên:",-1)),b(" "+h(o.order.user.full_name),1)]),e("p",null,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Email:",-1)),b(" "+h(o.order.user.email),1)]),e("p",null,[t[15]||(t[15]=e("span",{class:"text-gray-500"},"Điện thoại:",-1)),b(" "+h(o.order.user.phone_number),1)])])]),e("div",null,[t[20]||(t[20]=e("h4",{class:"font-medium mb-2"},"Thông tin đặt hàng",-1)),e("div",Pt,[e("p",null,[t[17]||(t[17]=e("span",{class:"text-gray-500"},"Ngày đặt:",-1)),b(" "+h(s.formatDateTime(o.order.created_at)),1)]),e("p",null,[t[18]||(t[18]=e("span",{class:"text-gray-500"},"Phương thức:",-1)),b(" "+h((c=o.order.payment_method)==null?void 0:c.method_name),1)]),o.order.voucher?(m(),p("p",Ht,[t[19]||(t[19]=e("span",{class:"text-gray-500"},"Mã giảm giá:",-1)),b(" "+h(o.order.voucher.code),1)])):C("",!0)])])]),e("div",Ot,[t[21]||(t[21]=e("h4",{class:"font-medium mb-2"},"Địa chỉ giao hàng",-1)),o.order.shipping_address?(m(),p("div",Et,[e("p",Qt,h(o.order.shipping_address.address),1),e("p",Dt,h(s.formatAddress(o.order.shipping_address))+" ("+h(o.order.shipping_address.ward.name)+", "+h(o.order.shipping_address.district.name)+", "+h(o.order.shipping_address.province.name)+") ",1)])):(m(),p("p",Lt,"Chưa có địa chỉ giao hàng"))])]}),_:1}),S(g,null,{header:_(()=>t[22]||(t[22]=[e("h3",{class:"text-lg font-medium"},"Danh sách sản phẩm/dịch vụ",-1)])),default:_(()=>[e("div",zt,[e("table",At,[t[26]||(t[26]=e("thead",null,[e("tr",{class:"bg-gray-50 dark:bg-dark-bg/50"},[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sản phẩm/Dịch vụ "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Đơn giá "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số lượng "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thành tiền ")])],-1)),e("tbody",qt,[(m(!0),p(H,null,X(o.order.order_items,c=>(m(),p("tr",{key:c.id,class:"hover:bg-gray-50 dark:hover:bg-dark-bg/30"},[e("td",Ft,[e("div",Gt,[s.getItemImage(c)?(m(),p("img",{key:0,src:s.getItemImage(c),class:"h-10 w-10 rounded-lg object-cover mr-3"},null,8,Xt)):C("",!0),e("div",null,[e("div",Kt,h(s.getItemName(c)),1),e("div",Jt,[S(i,{type:c.item_type},null,8,["type"]),c.service_type?(m(),p("span",Zt,h(s.getServiceTypeText(c.service_type)),1)):C("",!0)])])])]),e("td",Rt,h(s.formatCurrency(c.price)),1),e("td",Wt,h(c.quantity),1),e("td",Yt,h(s.formatCurrency(c.price*c.quantity)),1)]))),128))]),e("tfoot",$t,[e("tr",null,[t[23]||(t[23]=e("td",{colspan:"3",class:"px-4 py-3 text-right font-medium"},"Tổng tiền:",-1)),e("td",en,h(s.formatCurrency(o.order.total_amount)),1)]),o.order.discount_amount?(m(),p("tr",tn,[t[24]||(t[24]=e("td",{colspan:"3",class:"px-4 py-3 text-right font-medium"},"Giảm giá:",-1)),e("td",nn," -"+h(s.formatCurrency(o.order.discount_amount)),1)])):C("",!0),e("tr",rn,[t[25]||(t[25]=e("td",{colspan:"3",class:"px-4 py-3 text-right font-medium"},"Thành tiền:",-1)),e("td",sn,h(s.formatCurrency(o.order.total_amount-o.order.discount_amount)),1)])])])])]),_:1}),s.orderTimeline.length?(m(),P(g,{key:0},{header:_(()=>t[27]||(t[27]=[e("h3",{class:"text-lg font-medium"},"Lịch sử đơn hàng",-1)])),default:_(()=>[e("div",on,[e("ul",an,[(m(!0),p(H,null,X(s.orderTimeline,(c,G)=>(m(),p("li",{key:c.id},[e("div",ln,[G!==s.orderTimeline.length-1?(m(),p("span",dn)):C("",!0),e("div",cn,[e("div",null,[e("span",{class:U(["h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white dark:ring-dark-surface",c.iconBackground])},[e("i",{class:U([c.iconClass,"text-white"]),"aria-hidden":"true"},null,2)],2)]),e("div",un,[e("div",null,[e("p",mn,h(c.content),1)]),e("div",gn,[e("time",{datetime:c.datetime},h(s.formatDateTime(c.datetime)),9,hn)])])])])]))),128))])])]),_:1})):C("",!0)]),e("div",pn,[S(g,null,{default:_(()=>[e("div",fn,[e("div",null,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium mb-3"},"Trạng thái đơn hàng",-1)),e("div",yn,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"Trạng thái hiện tại",-1)),S(v,{status:o.order.status,class:"px-3 py-1"},null,8,["status"])])]),e("div",bn,[s.canQuickConfirm?(m(),p("button",{key:0,onClick:t[0]||(t[0]=(...c)=>s.handleQuickConfirm&&s.handleQuickConfirm(...c)),class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[30]||(t[30]=[e("i",{class:"mdi mdi-check-circle-outline mr-2"},null,-1),b(" Xác nhận đơn hàng ")]))):C("",!0),o.order.status==="confirmed"?(m(),p(H,{key:1},[e("button",{onClick:t[1]||(t[1]=(...c)=>s.handleQuickShipping&&s.handleQuickShipping(...c)),class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[31]||(t[31]=[e("i",{class:"mdi mdi-truck-delivery-outline mr-2"},null,-1),b(" Giao hàng ")])),s.canQuickComplete?(m(),p("button",{key:0,onClick:t[2]||(t[2]=(...c)=>s.handleQuickComplete&&s.handleQuickComplete(...c)),class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[32]||(t[32]=[e("i",{class:"mdi mdi-check-circle-outline mr-2"},null,-1),b(" Hoàn thành đơn hàng ")]))):C("",!0)],64)):C("",!0),o.order.status==="shipping"?(m(),p(H,{key:2},[s.canQuickComplete?(m(),p("button",{key:0,onClick:t[3]||(t[3]=(...c)=>s.handleQuickComplete&&s.handleQuickComplete(...c)),class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[33]||(t[33]=[e("i",{class:"mdi mdi-check-circle-outline mr-2"},null,-1),b(" Hoàn thành đơn hàng ")]))):C("",!0),e("button",{onClick:t[4]||(t[4]=(...c)=>s.openUpdateStatusModal&&s.openUpdateStatusModal(...c)),class:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[34]||(t[34]=[e("i",{class:"mdi mdi-pencil-outline mr-2"},null,-1),b(" Cập nhật trạng thái ")]))],64)):C("",!0),s.canUpdateStatus&&o.order.status!=="shipping"?(m(),p("button",{key:3,onClick:t[5]||(t[5]=(...c)=>s.openUpdateStatusModal&&s.openUpdateStatusModal(...c)),class:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[35]||(t[35]=[e("i",{class:"mdi mdi-pencil-outline mr-2"},null,-1),b(" Cập nhật trạng thái ")]))):C("",!0),s.canCancel?(m(),p("button",{key:4,onClick:t[6]||(t[6]=(...c)=>s.openCancelModal&&s.openCancelModal(...c)),class:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[36]||(t[36]=[e("i",{class:"mdi mdi-close-circle-outline mr-2"},null,-1),b(" Hủy đơn hàng ")]))):C("",!0),s.hasCreatedServicePackages?(m(),P(l,{key:5,href:n.route("users.show",o.order.user_id),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},{default:_(()=>t[37]||(t[37]=[e("i",{class:"mdi mdi-package-variant mr-2"},null,-1),b(" Xem gói dịch vụ người dùng ")])),_:1},8,["href"])):C("",!0),s.needsServicePackageCreation&&!s.hasCreatedServicePackages?(m(),p("button",{key:6,onClick:t[7]||(t[7]=(...c)=>s.openCompleteModal&&s.openCompleteModal(...c)),class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},[t[38]||(t[38]=e("i",{class:"mdi mdi-check-circle-outline mr-2"},null,-1)),b(" "+h(o.order.status==="completed"?"Tạo gói dịch vụ":"Hoàn thành đơn hàng"),1)])):C("",!0)])])]),_:1}),S(g,null,{header:_(()=>t[39]||(t[39]=[e("h3",{class:"text-lg font-medium"},"Thông tin thanh toán",-1)])),default:_(()=>[o.order.invoice?(m(),p("div",xn,[e("div",vn,[t[40]||(t[40]=e("span",{class:"text-gray-500"},"Trạng thái",-1)),S(u,{status:o.order.invoice.status},null,8,["status"])]),e("div",kn,[e("div",Cn,[t[41]||(t[41]=e("span",{class:"text-gray-500"},"Tổng tiền",-1)),e("span",wn,h(s.formatCurrency(o.order.invoice.total_amount)),1)]),e("div",_n,[t[42]||(t[42]=e("span",{class:"text-gray-500"},"Đã thanh toán",-1)),e("span",Sn,h(s.formatCurrency(o.order.invoice.paid_amount)),1)]),e("div",Vn,[t[43]||(t[43]=e("span",{class:"text-gray-500"},"Còn lại",-1)),e("span",Tn,h(s.formatCurrency(o.order.invoice.remaining_amount)),1)])]),S(l,{href:n.route("invoices.show",o.order.invoice.id),class:"flex items-center justify-center px-4 py-2.5 font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600 transition-colors duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-surface"},{default:_(()=>t[44]||(t[44]=[e("i",{class:"mdi mdi-file-document-outline text-xl mr-2"},null,-1),b(" Xem chi tiết hóa đơn ")])),_:1},8,["href"])])):(m(),p("div",Mn,[t[46]||(t[46]=e("div",{class:"mb-4"},[e("i",{class:"mdi mdi-file-document-plus-outline text-5xl text-gray-400"})],-1)),t[47]||(t[47]=e("p",{class:"text-gray-500 mb-4"},"Chưa có hóa đơn cho đơn hàng này",-1)),s.canCreateInvoice?(m(),p("button",{key:0,onClick:t[8]||(t[8]=(...c)=>s.openCreateInvoiceModal&&s.openCreateInvoiceModal(...c)),class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium flex items-center justify-center transition-colors duration-200"},t[45]||(t[45]=[e("i",{class:"mdi mdi-plus-circle-outline mr-2 text-xl"},null,-1),b(" Tạo hóa đơn mới ")]))):C("",!0)]))]),_:1})])]),S(k,{modelValue:s.showStatusModal,"onUpdate:modelValue":t[9]||(t[9]=c=>s.showStatusModal=c),order:o.order,"available-statuses":s.getAvailableStatuses,onUpdated:s.handleStatusUpdated},null,8,["modelValue","order","available-statuses","onUpdated"]),S(L,{modelValue:s.showCreateInvoiceModal,"onUpdate:modelValue":t[10]||(t[10]=c=>s.showCreateInvoiceModal=c),order:o.order,onCreated:s.handleInvoiceCreated},null,8,["modelValue","order","onCreated"]),S(z,{modelValue:s.showCompleteModal,"onUpdate:modelValue":t[11]||(t[11]=c=>s.showCompleteModal=c),order:o.order,"has-service-combo":s.hasServiceCombo,onCompleted:s.handleOrderCompleted},null,8,["modelValue","order","has-service-combo","onCompleted"]),S(A,{modelValue:s.showCancelModal,"onUpdate:modelValue":t[12]||(t[12]=c=>s.showCancelModal=c),order:o.order,title:`Hủy đơn hàng #${o.order.id}`,onCancelled:s.handleOrderCancelled},null,8,["modelValue","order","title","onCancelled"])]),_:1},8,["breadcrumbs"])]),_:1})}const wr=Ee(Tt,[["render",jn]]);export{wr as default};
