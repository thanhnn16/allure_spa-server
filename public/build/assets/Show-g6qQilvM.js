import{Z as A,F as g}from"./@inertiajs-D0DMCEQB.js";import{L as B}from"./LayoutAuthenticated-teYRwYCx.js";import{_ as E}from"./SectionMain-BbIPmLtw.js";import{_}from"./CardBox-jfYP3QDG.js";import{_ as f}from"./BaseButton-eMTGofBM.js";import{_ as G}from"./SectionTitleLineWithButton-O7fqc9DU.js";import H from"./EditProductModal-D9fuqGxW.js";import q from"./DeleteConfirmModal-DQxMUMti.js";import{C as Q}from"./Carousel-Bt6HuWeA.js";import z from"./ManageImagesModal-C60uWkgL.js";import K from"./TranslationsModal-ClOTzbEQ.js";import{aw as O,q as W,e as X,aA as Z,f as J}from"./@mdi-CTfBXXzV.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as h,c as $,o as Y,aU as o,a0 as w,bH as u,aa as s,bl as c,a3 as t,a2 as d,bf as l,b0 as C,F as x,a1 as U,j as N}from"./@vue-BRgAy5zV.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-BDfLYfvA.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./vue-toastification-ejyjJRED.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";import"./CardBoxModal-COZ15ICG.js";import"./BaseButtons-B17KSMwc.js";const tt={class:"flex justify-between items-center mb-6"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},rt={class:"space-y-4"},at={class:"bg-white dark:bg-dark-surface rounded-xl shadow-lg p-4"},ot=["alt"],dt={class:"flex flex-wrap gap-2"},st={class:"bg-white dark:bg-dark-surface rounded-xl shadow-lg p-6 space-y-6"},it={class:"border-b dark:border-dark-border pb-4"},lt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},nt={class:"text-gray-600 dark:text-gray-400 mt-2"},ct={class:"grid grid-cols-2 gap-4"},ut={class:"bg-gray-50 dark:bg-dark-bg rounded-lg p-4"},mt={class:"text-2xl font-bold text-green-600 dark:text-green-500"},pt={class:"bg-gray-50 dark:bg-dark-bg rounded-lg p-4"},gt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ft={class:"space-y-4"},ht={key:0,class:"border-b dark:border-dark-border pb-4"},xt={class:"font-medium text-gray-700 dark:text-gray-300 mb-2"},bt={class:"text-gray-600 dark:text-gray-400 whitespace-pre-line"},yt={class:"overflow-x-auto"},kt={key:0,class:"min-w-full divide-y divide-gray-200 dark:divide-dark-border"},vt={class:"px-6 py-4"},_t={class:"px-6 py-4"},wt={class:"px-6 py-4"},Ct={class:"px-6 py-4"},Vt={key:0,class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-400"},Mt={key:1,class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"},Dt={key:1,class:"text-gray-500 italic"},Tt={key:0,class:"min-w-full divide-y divide-gray-200 dark:divide-dark-border"},$t={class:"bg-white divide-y divide-gray-200 dark:bg-dark-surface dark:divide-dark-border"},Ut={class:"px-6 py-4 whitespace-nowrap"},Nt={class:"px-6 py-4 whitespace-nowrap"},Pt={key:1,class:"text-gray-500 italic"},St={__name:"Show",props:{product:Object,categories:Array},setup(a){const n=a,m=h(!1),p=h(!1),b=h(!1),y=h(!1),P={itemsToShow:1,snapAlign:"center"},V=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),M=()=>{m.value=!1},S=()=>{M(),g.reload({only:["product"]})},I=()=>{p.value=!1,g.visit(route("products.index"))},D=$(()=>n.product.media.map(i=>({...i,file_path:i.file_path.startsWith("http")?i.file_path:`/storage/${i.file_path}`}))),L=()=>{g.reload({only:["product"]})},T=i=>new Date(i).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),k=$(()=>n.product.price_history?[...n.product.price_history].sort((i,e)=>new Date(e.effective_from)-new Date(i.effective_from)):[]),F=()=>{g.reload({only:["product"]})},j={brand_description:"Mô tả thương hiệu",usage:"Cách sử dụng",benefits:"Lợi ích",key_ingredients:"Thành phần chính",ingredients:"Thành phần đầy đủ",directions:"Hướng dẫn sử dụng",storage_instructions:"Hướng dẫn bảo quản",product_notes:"Ghi chú sản phẩm"};return Y(()=>{console.log("Chi tiết sản phẩm:",n.product),n.product.media&&n.product.media.length>0&&(console.log("Đường dẫn hình ảnh gốc:",n.product.media[0].file_path),console.log("Đường dẫn hình ảnh đã xử lý:",D.value[0].file_path))}),(i,e)=>(o(),w(B,null,{default:u(()=>[s(c(A),{title:"Chi tiết sản phẩm: "+a.product.name},null,8,["title"]),s(E,{breadcrumbs:[{label:"Danh sách sản phẩm",href:i.route("products.index")},{label:a.product.name}]},{default:u(()=>[t("div",tt,[s(G,{icon:c(O),title:"Chi tiết sản phẩm",main:""},null,8,["icon"])]),s(_,{class:"mb-6 dark:bg-dark-surface"},{default:u(()=>[t("div",et,[t("div",rt,[t("div",at,[a.product.media&&a.product.media.length>0?(o(),w(Q,{key:0,items:D.value,settings:P,class:"rounded-lg overflow-hidden"},null,8,["items"])):(o(),d("img",{key:1,src:"/images/placeholder-product.jpg",alt:a.product.name,class:"w-full h-auto rounded-lg shadow"},null,8,ot))]),t("div",dt,[s(f,{icon:c(W),label:"Quản lý ảnh",color:"success",class:"flex-grow md:flex-grow-0",onClick:e[0]||(e[0]=r=>b.value=!0)},null,8,["icon"]),s(f,{icon:c(X),label:"Chỉnh sửa",color:"info",class:"flex-grow md:flex-grow-0",onClick:e[1]||(e[1]=r=>m.value=!0)},null,8,["icon"]),s(f,{icon:c(Z),label:"Quản lý bản dịch",color:"warning",class:"flex-grow md:flex-grow-0",onClick:e[2]||(e[2]=r=>y.value=!0)},null,8,["icon"]),s(f,{icon:c(J),label:"Xóa",color:"danger",class:"flex-grow md:flex-grow-0",onClick:e[3]||(e[3]=r=>p.value=!0)},null,8,["icon"])])]),t("div",st,[t("div",it,[t("h3",lt,l(a.product.name),1),t("p",nt,l(a.product.category?a.product.category.category_name:"Không có danh mục"),1)]),t("div",ct,[t("div",ut,[e[8]||(e[8]=t("h4",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Giá hiện tại",-1)),t("p",mt,l(V(a.product.price)),1)]),t("div",pt,[e[9]||(e[9]=t("h4",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Số lượng",-1)),t("p",gt,l(a.product.quantity),1)])]),t("div",ft,[(o(),d(x,null,C(j,(r,v)=>(o(),d(x,{key:v},[a.product[v]?(o(),d("div",ht,[t("h4",xt,l(r),1),t("p",bt,l(a.product[v]),1)])):U("",!0)],64))),64))])])])]),_:1}),s(_,{class:"mb-6 dark:bg-dark-surface"},{default:u(()=>[e[11]||(e[11]=t("h3",{class:"text-xl font-semibold mb-4 dark:text-gray-100"},"Lịch sử giá",-1)),t("div",yt,[k.value&&k.value.length>0?(o(),d("table",kt,[e[10]||(e[10]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-dark-border"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wider"}," Giá"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wider"}," Ngày bắt đầu"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wider"}," Ngày kết thúc"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wider"}," Trạng thái")])],-1)),t("tbody",null,[(o(!0),d(x,null,C(k.value,r=>(o(),d("tr",{key:r.id,class:N(["border-b border-gray-100 hover:bg-gray-50 transition-colors dark:border-dark-border dark:hover:bg-dark-bg",{"bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30":!r.effective_to}])},[t("td",vt,[t("span",{class:N({"font-semibold text-green-600":!r.effective_to})},l(V(r.price)),3)]),t("td",_t,l(T(r.effective_from)),1),t("td",wt,l(r.effective_to?T(r.effective_to):"-"),1),t("td",Ct,[r.effective_to?(o(),d("span",Mt," Đã kết thúc ")):(o(),d("span",Vt," Đang áp dụng "))])],2))),128))])])):(o(),d("p",Dt,"Chưa có dữ liệu lịch sử giá."))])]),_:1}),s(_,{class:"mb-6 dark:bg-dark-surface"},{default:u(()=>[e[13]||(e[13]=t("h3",{class:"text-xl font-semibold mb-4 dark:text-gray-100"},"Thuộc tính sản phẩm",-1)),a.product.attributes&&a.product.attributes.length>0?(o(),d("table",Tt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 dark:bg-dark-bg"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Tên thuộc tính"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Giá trị")])],-1)),t("tbody",$t,[(o(!0),d(x,null,C(a.product.attributes,r=>(o(),d("tr",{key:r.id},[t("td",Ut,l(r.name),1),t("td",Nt,l(r.pivot.attribute_value),1)]))),128))])])):(o(),d("p",Pt,"Chưa có dữ liệu thuộc tính sản phẩm."))]),_:1})]),_:1},8,["breadcrumbs"]),s(H,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=r=>m.value=r),product:a.product,categories:a.categories,onClose:M,onProductUpdated:S},null,8,["modelValue","product","categories"]),p.value?(o(),w(q,{key:0,product:a.product,onClose:e[5]||(e[5]=r=>p.value=!1),onProductDeleted:I},null,8,["product"])):U("",!0),s(z,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=r=>b.value=r),product:a.product,onUpdated:L},null,8,["modelValue","product"]),s(K,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=r=>y.value=r),product:a.product,onTranslationsUpdated:F},null,8,["modelValue","product"])]),_:1}))}},Ne=R(St,[["__scopeId","data-v-afcc70c2"]]);export{Ne as default};
