import{Z as C,F as D}from"./@inertiajs-D0DMCEQB.js";import{L as M}from"./LayoutAuthenticated-D078pk3d.js";import{_ as B}from"./SectionMain-Vot1TOkK.js";import{a as L}from"./axios-CCb-kr4I.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as T,b2 as v,aU as d,a0 as I,bH as k,aa as w,a3 as t,a2 as g,bf as c,a1 as N}from"./@vue-BRgAy5zV.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./@mdi-ArhfA4cU.js";import"./app-B23a1NkA.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./vue-toastification-ejyjJRED.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";const P={components:{Head:C,LayoutAuthenticated:M,SectionMain:B},props:{status:{type:String,default:null},transactionId:{type:String,default:null}},setup(m){const o=l(!0),a=l(m.status||"pending"),e=l(""),f=l(m.transactionId),h=l(null),x=s=>({PAID:"Đã thanh toán",PENDING:"Chờ thanh toán",CANCELLED:"Đã hủy",EXPIRED:"Đã hết hạn"})[s]||s,y=s=>s?new Date(s).toLocaleString("vi-VN"):"";return T(async()=>{var u,_;const s=new URLSearchParams(window.location.search),n=s.get("status"),r=s.get("orderCode"),p=s.get("invoice_id");if(n==="success"&&r)try{const i=await L.post("/api/payos/verify",{orderCode:r,invoice_id:p});i.data.success?(a.value="success",h.value=i.data.data):(a.value="error",e.value=i.data.message||"Không thể xác minh giao dịch")}catch(i){a.value="error",e.value=((_=(u=i.response)==null?void 0:u.data)==null?void 0:_.message)||"Đã có lỗi xảy ra"}else n==="cancel"?a.value="cancel":(a.value="error",e.value="Trạng thái thanh toán không hợp lệ");o.value=!1}),{loading:o,status:a,errorMessage:e,transactionId:f,paymentData:h,getStatusText:x,formatDateTime:y,goBack:()=>{D.visit("/invoices")}}}},A={class:"container mx-auto px-4 py-8"},E={class:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden"},H={class:"p-6"},V={key:0,class:"text-center py-8"},j={key:1,class:"text-center py-8"},F={class:"space-y-4"},G={class:"bg-gray-50 p-4 rounded-lg"},R={class:"font-medium"},U={class:"bg-gray-50 p-4 rounded-lg"},z={class:"font-medium"},K={class:"bg-gray-50 p-4 rounded-lg"},Q={class:"font-medium"},X={class:"bg-gray-50 p-4 rounded-lg"},Z={class:"font-medium text-green-600"},q={key:2,class:"text-center py-8"},J={class:"text-gray-600 mb-6"},O={key:3,class:"text-center py-8"},W={class:"mt-8 text-center"};function Y(m,o,a,e,f,h){const x=v("Head"),y=v("SectionMain"),b=v("LayoutAuthenticated");return d(),I(b,null,{default:k(()=>[w(x,{title:"Test Payment"}),w(y,null,{default:k(()=>{var s,n,r,p;return[t("div",A,[t("div",E,[t("div",H,[e.loading?(d(),g("div",V,o[1]||(o[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"},null,-1),t("p",{class:"text-gray-600"},"Đang xử lý thanh toán...",-1)]))):e.status==="success"?(d(),g("div",j,[o[6]||(o[6]=t("div",{class:"mb-4"},[t("svg",{class:"h-16 w-16 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),o[7]||(o[7]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Thanh toán thành công!",-1)),o[8]||(o[8]=t("p",{class:"text-gray-600 mb-6"},"Cảm ơn bạn đã thực hiện giao dịch test.",-1)),t("div",F,[t("div",G,[o[2]||(o[2]=t("p",{class:"text-sm text-gray-600"},"Mã giao dịch",-1)),t("p",R,c((s=e.paymentData)==null?void 0:s.orderCode),1)]),t("div",U,[o[3]||(o[3]=t("p",{class:"text-sm text-gray-600"},"Số tiền",-1)),t("p",z,c(m.formatCurrency((n=e.paymentData)==null?void 0:n.amount)),1)]),t("div",K,[o[4]||(o[4]=t("p",{class:"text-sm text-gray-600"},"Thời gian thanh toán",-1)),t("p",Q,c(e.formatDateTime((r=e.paymentData)==null?void 0:r.createdAt)),1)]),t("div",X,[o[5]||(o[5]=t("p",{class:"text-sm text-gray-600"},"Trạng thái",-1)),t("p",Z,c(e.getStatusText((p=e.paymentData)==null?void 0:p.status)),1)])])])):e.status==="error"?(d(),g("div",q,[o[9]||(o[9]=t("div",{class:"mb-4"},[t("svg",{class:"h-16 w-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),o[10]||(o[10]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Thanh toán thất bại",-1)),t("p",J,c(e.errorMessage),1)])):e.status==="cancel"?(d(),g("div",O,o[11]||(o[11]=[t("div",{class:"mb-4"},[t("svg",{class:"h-16 w-16 text-yellow-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),t("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Giao dịch đã bị hủy",-1),t("p",{class:"text-gray-600"},"Bạn đã hủy giao dịch test này.",-1)]))):N("",!0),t("div",W,[t("button",{onClick:o[0]||(o[0]=(...u)=>e.goBack&&e.goBack(...u)),class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg"}," Quay lại trang chủ ")])])])])]}),_:1})]),_:1})}const Gt=S(P,[["render",Y]]);export{Gt as default};
