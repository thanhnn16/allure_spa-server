import{r as p,o as z,aU as r,a0 as D,bH as u,aa as o,bl as _,a3 as t,a2 as l,a1 as N,bJ as A,bz as E,b0 as v,bf as i,F as k,j as B,a9 as I}from"./@vue-BRgAy5zV.js";import{Z as F}from"./@inertiajs-D0DMCEQB.js";import{L as H}from"./LayoutAuthenticated-XZirOlYW.js";import{_ as M}from"./SectionMain-BbIPmLtw.js";import{_ as G}from"./CardBox-jfYP3QDG.js";import{_ as J}from"./BaseButtons-B17KSMwc.js";import{_ as g}from"./BaseButton-eMTGofBM.js";import{_ as O}from"./FormControl-BSsARiYM.js";import{w as Z,k as q,aa as W,aG as X}from"./@mdi-CTfBXXzV.js";import{_ as Y}from"./BaseIcon-B4kwkOCn.js";import{a as L}from"./axios-CCb-kr4I.js";import{u as tt}from"./vue-toastification-ejyjJRED.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-sTdmxqRJ.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";import"./main-BNmBi4-k.js";const at={class:"flex flex-col md:flex-row justify-between items-center mb-6"},st={class:"flex items-center space-x-2"},rt={key:0,class:"animate-spin"},ot={class:"flex flex-col md:flex-row gap-4 mt-4 md:mt-0 w-full md:w-auto"},lt={class:"relative"},it={class:"overflow-x-auto rounded-lg border dark:border-slate-700"},nt={class:"w-full"},dt={class:"bg-white dark:bg-slate-900 divide-y dark:divide-slate-700"},ct={class:"px-4 py-4 whitespace-nowrap"},ut={class:"flex items-center"},pt={class:"flex-shrink-0 h-10 w-10"},mt=["src"],xt={class:"ml-4"},gt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},ft={class:"text-sm text-gray-500 dark:text-gray-400"},ht={class:"px-4 py-4"},yt={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},_t={class:"px-4 py-4 text-sm text-gray-900 dark:text-gray-100"},vt={class:"px-4 py-4"},kt={class:"flex space-x-1"},bt={class:"px-4 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs"},wt={class:"truncate"},Ct={class:"px-4 py-4"},St={class:"flex gap-2"},$t=["src","onClick"],Tt={class:"px-4 py-4 text-sm text-gray-500 dark:text-gray-400"},Vt={class:"px-4 py-4"},jt={key:0,class:"flex space-x-2"},Dt={class:"flex justify-between items-center mt-6"},Nt={class:"text-sm text-gray-700 dark:text-gray-300"},Bt={__name:"Index",setup(It){const b=p([]),f=p(!1),n=p(1),x=p(1),h=p(""),m=p(""),K=tt(),d=async()=>{f.value=!0;try{const s=await L.get("/api/ratings",{params:{page:n.value,status:h.value,search:m.value}});b.value=s.data.data.data,x.value=s.data.data.last_page}catch{y("Không thể tải danh sách đánh giá","danger")}f.value=!1},w=async(s,a)=>{try{await L.put(`/api/ratings/${s}`,{status:a}),y("Cập nhật trạng thái thành công","success"),await d()}catch(e){console.error("Error updating rating status:",e),y("Không thể cập nhật trạng thái","danger")}},y=(s,a="success")=>{K[a](s)},P=s=>Array(5).fill().map((a,e)=>e<s?W:X),Q=s=>new Date(s).toLocaleDateString("vi-VN"),R=s=>s==="product"?"SP":"DV",U=s=>({pending:"Chờ duyệt",approved:"Đã duyệt",rejected:"Đã từ chối"})[s]||s;return z(()=>{d()}),(s,a)=>(r(),D(H,null,{default:u(()=>[o(_(F),{title:"Quản lý đánh giá"}),o(M,null,{default:u(()=>[o(G,{class:"mb-6"},{default:u(()=>[t("div",at,[t("div",st,[a[5]||(a[5]=t("h1",{class:"text-2xl font-bold dark:text-gray-100"},"Quản lý đánh giá",-1)),f.value?(r(),l("span",rt,"⌛")):N("",!0)]),t("div",ot,[t("div",lt,[o(O,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),placeholder:"Tìm kiếm theo tên khách hàng...",class:"min-w-[250px] dark:bg-slate-800 dark:border-slate-700 dark:text-gray-100",onInput:d},{rightIcon:u(()=>[m.value?(r(),l("span",{key:0,class:"cursor-pointer text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:a[0]||(a[0]=e=>{m.value="",d()})}," ✕ ")):N("",!0)]),_:1},8,["modelValue"])]),A(t("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),class:"rounded-lg border-gray-300 dark:bg-slate-800 dark:border-slate-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500 transition-colors duration-150",onChange:d},a[6]||(a[6]=[t("option",{value:""},"Tất cả",-1),t("option",{value:"pending"},"Chờ duyệt",-1),t("option",{value:"approved"},"Đã duyệt",-1),t("option",{value:"rejected"},"Đã từ chối",-1)]),544),[[E,h.value]])])]),t("div",it,[t("table",nt,[a[8]||(a[8]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-slate-800 border-b dark:border-slate-700"},[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Khách hàng "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Loại "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Sản phẩm/Dịch vụ "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Đánh giá "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Bình luận "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Hình ảnh "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ngày tạo "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Trạng thái ")])],-1)),t("tbody",dt,[(r(!0),l(k,null,v(b.value,e=>{var C,S,$,T,V;return r(),l("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors duration-150"},[t("td",ct,[t("div",ut,[t("div",pt,[t("img",{class:"h-10 w-10 rounded-full",src:((C=e.user)==null?void 0:C.avatar_url)||"path/to/default/avatar.png",alt:""},null,8,mt)]),t("div",xt,[t("div",gt,i((S=e.user)==null?void 0:S.name),1),t("div",ft,i(($=e.user)==null?void 0:$.email),1)])])]),t("td",ht,[t("span",yt,i(R(e.rating_type)),1)]),t("td",_t,i(((T=e.item)==null?void 0:T.name)||((V=e.item)==null?void 0:V.service_name)),1),t("td",vt,[t("div",kt,[(r(!0),l(k,null,v(P(e.stars),(c,j)=>(r(),D(Y,{key:j,path:c,class:B(["w-5 h-5",j<e.stars?"text-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["path","class"]))),128))])]),t("td",bt,[t("div",wt,i(e.comment),1)]),t("td",Ct,[t("div",St,[(r(!0),l(k,null,v(e.media_urls,c=>(r(),l("div",{key:c.id,class:"relative group cursor-pointer"},[t("img",{src:c.url,class:"w-12 h-12 object-cover rounded-lg transition-transform duration-200 hover:scale-105 hover:shadow-lg",onClick:()=>s.window.open(c.url,"_blank")},null,8,$t),a[7]||(a[7]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 rounded-lg transition-all duration-200"},null,-1))]))),128))])]),t("td",Tt,i(Q(e.created_at)),1),t("td",Vt,[e.status==="pending"?(r(),l("div",jt,[o(g,{color:"success",icon:_(Z),onClick:c=>w(e.id,"approved"),small:"",tooltip:"Duyệt đánh giá",class:"hover:scale-105 transition-transform duration-200"},null,8,["icon","onClick"]),o(g,{color:"danger",icon:_(q),onClick:c=>w(e.id,"rejected"),small:"",tooltip:"Từ chối đánh giá",class:"hover:scale-105 transition-transform duration-200"},null,8,["icon","onClick"])])):(r(),l("span",{key:1,class:B(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":e.status==="approved","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":e.status==="rejected"}])},i(U(e.status)),3))])])}),128))])])]),t("div",Dt,[t("div",Nt," Trang "+i(n.value)+" / "+i(x.value),1),o(J,null,{default:u(()=>[o(g,{disabled:n.value===1,onClick:a[3]||(a[3]=e=>{n.value--,d()}),color:n.value===1?"light":"info",class:"transition-all duration-200"},{default:u(()=>a[9]||(a[9]=[I(" Trước ")])),_:1},8,["disabled","color"]),o(g,{disabled:n.value===x.value,onClick:a[4]||(a[4]=e=>{n.value++,d()}),color:n.value===x.value?"light":"info",class:"transition-all duration-200"},{default:u(()=>a[10]||(a[10]=[I(" Sau ")])),_:1},8,["disabled","color"])]),_:1})])]),_:1})]),_:1})]),_:1}))}},$e=et(Bt,[["__scopeId","data-v-60573ecc"]]);export{$e as default};
