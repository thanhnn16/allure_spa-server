import{Z as y,F as k}from"./@inertiajs-D0DMCEQB.js";import{L as C}from"./LayoutAuthenticated-BvAVfgDR.js";import{_ as $}from"./SectionMain-BbIPmLtw.js";import{b as x,w,k as V,e as T,d as S}from"./@mdi-BvzXeHmh.js";import{_ as c}from"./BaseButton-eMTGofBM.js";import{_ as B}from"./BaseButtons-B17KSMwc.js";import{_ as h}from"./CardBox-jfYP3QDG.js";import{a as f}from"./axios-CCb-kr4I.js";import{u as E}from"./vue-toastification-ejyjJRED.js";import{r as g,o as F,aU as l,a0 as L,bH as n,aa as e,bl as a,a3 as t,a2 as m,F as N,b0 as P,a9 as G,bf as r}from"./@vue-BRgAy5zV.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-Bm8xTv_r.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";const H={class:"flex justify-between items-center"},M={key:0,class:"text-center py-4"},Q={key:1,class:"overflow-x-auto"},j={class:"w-full text-left table-auto"},A={class:"p-4"},D={class:"text-sm text-gray-500"},I={class:"p-4"},K={class:"p-4"},U={class:"p-4"},Z={class:"p-4"},q={class:"p-4"},z={class:"p-4"},J={class:"p-4"},At={__name:"Index",setup(O){const p=g([]),d=g(!0),u=E(),v=async()=>{try{const s=await f.get("/api/vouchers");p.value=s.data.data}catch(s){console.error("Error fetching vouchers:",s)}finally{d.value=!1}},b=async s=>{try{await f.patch(`/api/vouchers/${s.id}/toggle-status`),u.success("Cập nhật trạng thái voucher thành công"),k.visit(route("vouchers.index"),{preserveScroll:!0,preserveState:!1})}catch(i){console.error("Error toggling voucher status:",i),u.error("Có lỗi xảy ra khi cập nhật trạng thái voucher")}};return F(()=>{v()}),(s,i)=>(l(),L(C,null,{default:n(()=>[e(a(y),{title:"Quản lý Voucher"}),e($,null,{default:n(()=>[e(h,{class:"mb-6"},{default:n(()=>[t("div",H,[i[1]||(i[1]=t("h1",{class:"text-2xl font-bold"},"Quản lý Voucher",-1)),e(c,{icon:a(x),color:"info",label:"Thêm Voucher",onClick:i[0]||(i[0]=o=>s.$inertia.visit(s.route("vouchers.create")))},null,8,["icon"])])]),_:1}),e(h,null,{default:n(()=>[d.value?(l(),m("div",M," Đang tải... ")):(l(),m("div",Q,[t("table",j,[i[2]||(i[2]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"p-4"},"Mã"),t("th",{class:"p-4"},"Loại giảm giá"),t("th",{class:"p-4"},"Giá trị"),t("th",{class:"p-4"},"Đơn tối thiểu"),t("th",{class:"p-4"},"Giảm tối đa"),t("th",{class:"p-4"},"Thời gian"),t("th",{class:"p-4"},"Trạng thái"),t("th",{class:"p-4"},"Thao tác")])],-1)),t("tbody",null,[(l(!0),m(N,null,P(p.value,o=>(l(),m("tr",{key:o.id,class:"border-b hover:bg-gray-50"},[t("td",A,[G(r(o.code)+" ",1),t("div",D,r(o.description),1)]),t("td",I,r(o.discount_type==="percentage"?"Phần trăm":"Số tiền cố định"),1),t("td",K,r(o.formatted_discount),1),t("td",U,r(o.min_order_value_formatted),1),t("td",Z,r(o.max_discount_amount_formatted),1),t("td",q,[t("div",null,"Từ: "+r(o.start_date_formatted),1),t("div",null,"Đến: "+r(o.end_date_formatted),1)]),t("td",z,[e(c,{color:o.status==="active"?"success":"danger",icon:o.status==="active"?a(w):a(V),label:o.status==="active"?"Hoạt động":"Không hoạt động",small:"",onClick:_=>b(o)},null,8,["color","icon","label","onClick"])]),t("td",J,[e(B,null,{default:n(()=>[e(c,{icon:a(T),color:"info",small:"",onClick:_=>s.$inertia.visit(s.route("vouchers.edit",o.id))},null,8,["icon","onClick"]),e(c,{icon:a(S),color:"success",small:"",onClick:_=>s.$inertia.visit(s.route("vouchers.show",o.id))},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]))]),_:1})]),_:1})]),_:1}))}};export{At as default};
