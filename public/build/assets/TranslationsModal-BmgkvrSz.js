import{r as k,c as j,o as D,e as f,aU as i,a0 as F,bH as L,a3 as t,aa as C,a2 as d,b0 as V,j as H,bf as p,F as w,bJ as T,bA as K,bx as q,a1 as E}from"./@vue-BRgAy5zV.js";import{C as z}from"./CardBoxModal-DKfmyhy3.js";import{_ as M}from"./BaseButton-eMTGofBM.js";import{u as A}from"./vue-toastification-ejyjJRED.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@mdi-DPpcS9jm.js";import"./BaseButtons-B17KSMwc.js";import"./CardBox-jfYP3QDG.js";import"./OverlayLayer-BSs7OF78.js";import"./@inertiajs-D0DMCEQB.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./colors-S7_1wET5.js";import"./BaseIcon-B4kwkOCn.js";const I={class:"space-y-6 max-h-[70vh] overflow-y-auto px-2 custom-scrollbar"},J={class:"flex items-center space-x-4 sticky top-0 bg-white dark:bg-dark-bg py-4 z-10 border-b dark:border-dark-border"},O={class:"flex space-x-2"},Q=["onClick"],S={key:0,class:"space-y-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"space-y-2"},X={class:"font-medium text-gray-500 dark:text-gray-400 flex items-center space-x-2"},Y={class:"bg-gray-50 dark:bg-dark-bg rounded-lg p-3"},Z={class:"whitespace-pre-line"},P={class:"space-y-2"},ee={class:"font-medium text-gray-700 dark:text-gray-300 flex items-center justify-between"},te={class:"flex items-center space-x-2"},ae={class:"text-sm text-gray-500"},oe={class:"relative"},se=["onUpdate:modelValue","maxlength","placeholder"],re=["onUpdate:modelValue","type","maxlength","placeholder"],ne=["onClick"],le={class:"flex justify-end space-x-2"},ce={__name:"TranslationsModal",props:{modelValue:Boolean,product:{type:Object,required:!0}},emits:["update:modelValue","translations-updated"],setup(h,{emit:$}){const u=A(),c=h,v=$,y=k(!1),n=k("en"),s=k({}),m=j({get:()=>c.modelValue,set:a=>v("update:modelValue",a)}),g=[{code:"en",name:"English"},{code:"ja",name:"日本語"}],x=[{key:"name",label:"Tên sản phẩm",type:"text",maxLength:255},{key:"brand_description",label:"Mô tả thương hiệu",type:"textarea",maxLength:1e3},{key:"usage",label:"Cách sử dụng",type:"textarea",maxLength:1e3},{key:"benefits",label:"Lợi ích",type:"textarea",maxLength:1e3},{key:"key_ingredients",label:"Thành phần chính",type:"textarea",maxLength:1e3},{key:"ingredients",label:"Thành phần đầy đủ",type:"textarea",maxLength:1e3},{key:"directions",label:"Hướng dẫn sử dụng",type:"textarea",maxLength:1e3},{key:"storage_instructions",label:"Hướng dẫn bảo quản",type:"textarea",maxLength:1e3},{key:"product_notes",label:"Ghi chú sản phẩm",type:"textarea",maxLength:1e3}],B=()=>{g.forEach(a=>{s.value[a.code]={},x.forEach(o=>{s.value[a.code][o.key]=""})})},b=async()=>{var a;if((a=c.product)!=null&&a.id)try{const e=(await axios.get(`/api/products/${c.product.id}/translations`)).data.data;g.forEach(r=>{s.value[r.code]=s.value[r.code]||{},x.forEach(l=>{var _;(_=e==null?void 0:e[r.code])!=null&&_[l.key]?s.value[r.code][l.key]=e[r.code][l.key]:s.value[r.code][l.key]=""})})}catch(o){console.error("Error loading translations:",o),u.error("Không thể tải bản dịch")}},N=async()=>{y.value=!0;try{await axios.post(`/api/products/${c.product.id}/translations`,{translations:s.value}),u.success("Đã lưu bản dịch thành công"),v("translations-updated"),m.value=!1}catch(a){console.error("Error saving translations:",a),u.error("Không thể lưu bản dịch")}finally{y.value=!1}},U=async a=>{u.info("Tính năng dịch tự động sẽ được phát triển sau")};return D(()=>{var a;B(),(a=c.product)!=null&&a.id&&b()}),f(()=>c.modelValue,a=>{var o;a&&((o=c.product)!=null&&o.id)&&b()}),f(()=>c.product,a=>{a!=null&&a.id&&b()},{deep:!0}),(a,o)=>(i(),F(z,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=e=>m.value=e),title:"Quản lý bản dịch","has-cancel":!1,"has-button":!1,"max-width":"2xl"},{footer:L(()=>[t("div",le,[C(M,{label:"Hủy",color:"white",onClick:o[0]||(o[0]=e=>m.value=!1)}),C(M,{label:"Lưu",color:"success",onClick:N,loading:y.value},null,8,["loading"])])]),default:L(()=>[t("div",I,[t("div",J,[o[2]||(o[2]=t("label",{class:"w-32 font-medium text-gray-700 dark:text-gray-300"},"Ngôn ngữ:",-1)),t("div",O,[(i(),d(w,null,V(g,e=>t("button",{key:e.code,onClick:r=>n.value=e.code,class:H(["px-4 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2",[n.value===e.code?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-bg hover:bg-gray-200 dark:hover:bg-dark-surface"]])},[t("span",null,p(e.name),1)],10,Q)),64))])]),s.value[n.value]?(i(),d("div",S,[(i(),d(w,null,V(x,e=>{var r;return t("div",{key:e.key,class:"space-y-2"},[t("div",R,[t("div",W,[t("label",X,[t("span",null,p(e.label),1)]),t("div",Y,[t("p",Z,p(h.product[e.key]||"Chưa có nội dung"),1)])]),t("div",P,[t("label",ee,[t("div",te,[t("span",null,p(e.label),1)]),t("span",ae,p(((r=s.value[n.value][e.key])==null?void 0:r.length)||0)+"/"+p(e.maxLength),1)]),t("div",oe,[e.type==="textarea"?T((i(),d("textarea",{key:0,"onUpdate:modelValue":l=>s.value[n.value][e.key]=l,class:"w-full form-textarea rounded-lg dark:bg-dark-bg min-h-[100px]",maxlength:e.maxLength,placeholder:`Nhập bản dịch cho ${e.label.toLowerCase()}...`},null,8,se)),[[K,s.value[n.value][e.key]]]):T((i(),d("input",{key:1,"onUpdate:modelValue":l=>s.value[n.value][e.key]=l,class:"w-full form-input rounded-lg dark:bg-dark-bg",type:e.type,maxlength:e.maxLength,placeholder:`Nhập bản dịch cho ${e.label.toLowerCase()}...`},null,8,re)),[[q,s.value[n.value][e.key]]]),!s.value[n.value][e.key]&&h.product[e.key]?(i(),d("button",{key:2,onClick:l=>U(e.key),class:"absolute right-2 top-2 text-primary-500 hover:text-primary-600 dark:text-primary-400",title:"Dịch tự động"},o[3]||(o[3]=[t("i",{class:"mdi mdi-translate text-xl"},null,-1)]),8,ne)):E("",!0)])])])])}),64))])):E("",!0)])]),_:1},8,["modelValue"]))}},Ae=G(ce,[["__scopeId","data-v-d8d6fcca"]]);export{Ae as default};
