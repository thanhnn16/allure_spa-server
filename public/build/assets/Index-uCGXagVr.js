import{Z as y}from"./@inertiajs-D0DMCEQB.js";import{L as k}from"./LayoutAuthenticated-WadtD5fF.js";import{_ as x}from"./SectionMain-BbIPmLtw.js";import{b as $,w as C,k as V,e as w,f as T}from"./@mdi-Dzgtc9aE.js";import{_ as m}from"./BaseButton-eMTGofBM.js";import{_ as B}from"./BaseButtons-B17KSMwc.js";import{_}from"./CardBox-jfYP3QDG.js";import{a as f}from"./axios-CCb-kr4I.js";import{r as h,o as L,aU as l,a0 as E,bH as n,aa as e,bl as r,a3 as t,a2 as p,F as N,b0 as P,a9 as Q,bf as i}from"./@vue-BRgAy5zV.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-qysCtdHT.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./vue-toastification-ejyjJRED.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";const S={class:"flex justify-between items-center"},D={key:0,class:"text-center py-4"},F={key:1,class:"overflow-x-auto"},G={class:"w-full text-left table-auto"},H={class:"p-4"},I={class:"text-sm text-gray-500"},M={class:"p-4"},j={class:"p-4"},A={class:"p-4"},K={class:"p-4"},U={class:"p-4"},Z={class:"p-4"},q={class:"p-4"},Ht={__name:"Index",setup(z){const c=h([]),u=h(!0),g=async()=>{try{const s=await f.get("/api/vouchers");c.value=s.data.data}catch(s){console.error("Error fetching vouchers:",s)}finally{u.value=!1}},b=async s=>{try{const a=await f.patch(`/api/vouchers/${s.id}/toggle-status`),o=c.value.findIndex(d=>d.id===s.id);c.value[o]=a.data.data}catch(a){console.error("Error toggling voucher status:",a)}};L(()=>{g()});const v=[{label:"Trang chủ",route:"dashboard"},{label:"Quản lý Voucher"}];return(s,a)=>(l(),E(k,null,{default:n(()=>[e(r(y),{title:"Quản lý Voucher"}),e(x,{breadcrumbs:v},{default:n(()=>[e(_,{class:"mb-6"},{default:n(()=>[t("div",S,[a[1]||(a[1]=t("h1",{class:"text-2xl font-bold"},"Quản lý Voucher",-1)),e(m,{icon:r($),color:"info",label:"Thêm Voucher",onClick:a[0]||(a[0]=o=>s.$inertia.visit(s.route("vouchers.create")))},null,8,["icon"])])]),_:1}),e(_,null,{default:n(()=>[u.value?(l(),p("div",D," Đang tải... ")):(l(),p("div",F,[t("table",G,[a[2]||(a[2]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"p-4"},"Mã"),t("th",{class:"p-4"},"Loại giảm giá"),t("th",{class:"p-4"},"Giá trị"),t("th",{class:"p-4"},"Đơn tối thiểu"),t("th",{class:"p-4"},"Giảm tối đa"),t("th",{class:"p-4"},"Thời gian"),t("th",{class:"p-4"},"Trạng thái"),t("th",{class:"p-4"},"Thao tác")])],-1)),t("tbody",null,[(l(!0),p(N,null,P(c.value,o=>(l(),p("tr",{key:o.id,class:"border-b hover:bg-gray-50"},[t("td",H,[Q(i(o.code)+" ",1),t("div",I,i(o.description),1)]),t("td",M,i(o.discount_type==="percentage"?"Phần trăm":"Số tiền cố định"),1),t("td",j,i(o.formatted_discount),1),t("td",A,i(o.min_order_value_formatted),1),t("td",K,i(o.max_discount_amount_formatted),1),t("td",U,[t("div",null,"Từ: "+i(o.start_date_formatted),1),t("div",null,"Đến: "+i(o.end_date_formatted),1)]),t("td",Z,[e(m,{color:o.status==="active"?"success":"danger",icon:o.status==="active"?r(C):r(V),label:o.status==="active"?"Hoạt động":"Không hoạt động",small:"",onClick:d=>b(o)},null,8,["color","icon","label","onClick"])]),t("td",q,[e(B,null,{default:n(()=>[e(m,{icon:r(w),color:"info",small:"",onClick:d=>s.$inertia.visit(s.route("vouchers.edit",o.id))},null,8,["icon","onClick"]),e(m,{icon:r(T),color:"danger",small:"",onClick:d=>s.deleteVoucher(o.id)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]))]),_:1})]),_:1})]),_:1}))}};export{Ht as default};
