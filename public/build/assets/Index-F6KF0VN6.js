import{Z as k}from"./@inertiajs-D0DMCEQB.js";import{L as x}from"./LayoutAuthenticated-D71Hf2y4.js";import{_ as $}from"./SectionMain-BbIPmLtw.js";import{b as C,w as V,k as w,e as T,f as B}from"./@mdi-Dzgtc9aE.js";import{_ as m}from"./BaseButton-eMTGofBM.js";import{_ as E}from"./BaseButtons-B17KSMwc.js";import{_ as h}from"./CardBox-jfYP3QDG.js";import{a as u}from"./axios-CCb-kr4I.js";import{r as g,o as L,aU as n,a0 as N,bH as l,aa as a,bl as i,a3 as t,a2 as p,F as P,b0 as Q,a9 as S,bf as r}from"./@vue-BRgAy5zV.js";import"./deepmerge-CtOfIP5S.js";import"./call-bind-aBC2DkHY.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./qs-Bnt7aRCy.js";import"./side-channel-FJR906QQ.js";import"./object-inspect-D3SFxae_.js";import"./nprogress-uqLJ5xmn.js";import"./lodash.clonedeep-Bxvn-V0B.js";import"./lodash.isequal-BYpQg7Um.js";import"./app-DT9Ddco3.js";import"./jspdf-Ciebq7We.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./laravel-echo-C9ppFO4I.js";import"./pusher-js-Cl-1XqxI.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./pinia-BhnhDyRZ.js";import"./vue-toastification-ejyjJRED.js";import"./firebase-DL3QX-oU.js";import"./@firebase--zA4YiqN.js";import"./idb-Bn1DMRyg.js";import"./BaseIcon-B4kwkOCn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./colors-S7_1wET5.js";import"./OverlayLayer-BSs7OF78.js";const D={class:"flex justify-between items-center"},F={key:0,class:"text-center py-4"},G={key:1,class:"overflow-x-auto"},H={class:"w-full text-left table-auto"},I={class:"p-4"},M={class:"text-sm text-gray-500"},j={class:"p-4"},A={class:"p-4"},K={class:"p-4"},U={class:"p-4"},Z={class:"p-4"},q={class:"p-4"},z={class:"p-4"},It={__name:"Index",setup(J){const c=g([]),_=g(!0),f=async()=>{try{const s=await u.get("/api/vouchers");c.value=s.data.data}catch(s){console.error("Error fetching vouchers:",s)}finally{_.value=!1}},b=async s=>{try{const e=await u.patch(`/api/vouchers/${s.id}/toggle-status`),o=c.value.findIndex(d=>d.id===s.id);c.value[o]=e.data.data}catch(e){console.error("Error toggling voucher status:",e)}},v=async s=>{if(confirm("Bạn có chắc chắn muốn xóa voucher này?"))try{await u.delete(`/api/vouchers/${s}`),await f()}catch(e){console.error("Error deleting voucher:",e)}};L(()=>{f()});const y=[{label:"Trang chủ",route:"dashboard"},{label:"Quản lý Voucher"}];return(s,e)=>(n(),N(x,null,{default:l(()=>[a(i(k),{title:"Quản lý Voucher"}),a($,{breadcrumbs:y},{default:l(()=>[a(h,{class:"mb-6"},{default:l(()=>[t("div",D,[e[1]||(e[1]=t("h1",{class:"text-2xl font-bold"},"Quản lý Voucher",-1)),a(m,{icon:i(C),color:"info",label:"Thêm Voucher",onClick:e[0]||(e[0]=o=>s.$inertia.visit(s.route("vouchers.create")))},null,8,["icon"])])]),_:1}),a(h,null,{default:l(()=>[_.value?(n(),p("div",F," Đang tải... ")):(n(),p("div",G,[t("table",H,[e[2]||(e[2]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"p-4"},"Mã"),t("th",{class:"p-4"},"Loại giảm giá"),t("th",{class:"p-4"},"Giá trị"),t("th",{class:"p-4"},"Đơn tối thiểu"),t("th",{class:"p-4"},"Giảm tối đa"),t("th",{class:"p-4"},"Thời gian"),t("th",{class:"p-4"},"Trạng thái"),t("th",{class:"p-4"},"Thao tác")])],-1)),t("tbody",null,[(n(!0),p(P,null,Q(c.value,o=>(n(),p("tr",{key:o.id,class:"border-b hover:bg-gray-50"},[t("td",I,[S(r(o.code)+" ",1),t("div",M,r(o.description),1)]),t("td",j,r(o.discount_type==="percentage"?"Phần trăm":"Số tiền cố định"),1),t("td",A,r(o.formatted_discount),1),t("td",K,r(o.min_order_value_formatted),1),t("td",U,r(o.max_discount_amount_formatted),1),t("td",Z,[t("div",null,"Từ: "+r(o.start_date_formatted),1),t("div",null,"Đến: "+r(o.end_date_formatted),1)]),t("td",q,[a(m,{color:o.status==="active"?"success":"danger",icon:o.status==="active"?i(V):i(w),label:o.status==="active"?"Hoạt động":"Không hoạt động",small:"",onClick:d=>b(o)},null,8,["color","icon","label","onClick"])]),t("td",z,[a(E,null,{default:l(()=>[a(m,{icon:i(T),color:"info",small:"",onClick:d=>s.$inertia.visit(s.route("vouchers.edit",o.id))},null,8,["icon","onClick"]),a(m,{icon:i(B),color:"danger",small:"",onClick:d=>v(o.id)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]))]),_:1})]),_:1})]),_:1}))}};export{It as default};
